{"version":3,"file":"kairos.esm.js","sources":["../src/adapters/MercadoPagoAdapter.ts","../src/adapters/PagSeguroAdapter.ts","../src/crypto/encryption.ts","../src/adapters/KairosEncryptedAdapter.ts","../src/core/KairosPayments.ts","../src/components/CardPaymentForm.tsx","../src/components/PixQrCode.ts","../src/core/PaymentPoller.ts","../src/index.ts"],"sourcesContent":["import type {\n  PspAdapter,\n  CardPaymentConfig,\n  CardPaymentInstance,\n  InstallmentOption,\n  PaymentData\n} from '../types';\n\ndeclare global {\n  interface Window {\n    MercadoPago: any;\n  }\n}\n\n/**\n * MercadoPago Adapter\n *\n * Uses MercadoPago Bricks for card payment UI.\n * @see https://www.mercadopago.com.br/developers/pt/docs/checkout-bricks\n */\nexport class MercadoPagoAdapter implements PspAdapter {\n  readonly provider = 'MERCADOPAGO';\n\n  private mp: any = null;\n  private bricksBuilder: any = null;\n  private cardPaymentBrick: any = null;\n  private publicKey: string = '';\n\n  /**\n   * Load MercadoPago SDK script dynamically.\n   */\n  private async loadScript(): Promise<void> {\n    if (window.MercadoPago) {\n      return;\n    }\n\n    return new Promise((resolve, reject) => {\n      const script = document.createElement('script');\n      script.src = 'https://sdk.mercadopago.com/js/v2';\n      script.async = true;\n      script.onload = () => resolve();\n      script.onerror = () => reject(new Error('Failed to load MercadoPago SDK'));\n      document.head.appendChild(script);\n    });\n  }\n\n  async init(publicKey: string, options?: Record<string, unknown>): Promise<void> {\n    this.publicKey = publicKey;\n\n    await this.loadScript();\n\n    this.mp = new window.MercadoPago(publicKey, {\n      locale: options?.locale || 'pt-BR'\n    });\n\n    this.bricksBuilder = this.mp.bricks();\n  }\n\n  async createCardPayment(\n    container: string | HTMLElement,\n    config: CardPaymentConfig\n  ): Promise<CardPaymentInstance> {\n    const containerId = typeof container === 'string'\n      ? container.replace('#', '')\n      : container.id;\n\n    // Clear any existing brick\n    if (this.cardPaymentBrick) {\n      await this.cardPaymentBrick.unmount();\n    }\n\n    const settings = {\n      initialization: {\n        amount: config.amount,\n        payer: {\n          email: ''\n        }\n      },\n      customization: {\n        visual: {\n          style: {\n            customVariables: {\n              formBackgroundColor: config.styles?.primaryColor || '#ffffff',\n              baseColor: config.styles?.primaryColor || '#1a1a1a'\n            }\n          }\n        },\n        paymentMethods: {\n          maxInstallments: config.maxInstallments || 12\n        }\n      },\n      callbacks: {\n        onReady: () => {\n          config.onReady?.();\n        },\n        onSubmit: async (cardFormData: any) => {\n          const paymentData: PaymentData = {\n            token: cardFormData.token,\n            installments: cardFormData.installments,\n            paymentMethodId: cardFormData.payment_method_id,\n            issuerId: cardFormData.issuer_id,\n            lastFourDigits: cardFormData.last_four_digits || '',\n            cardholderName: cardFormData.cardholder?.name || '',\n            provider: this.provider\n          };\n\n          await config.onSubmit(paymentData);\n        },\n        onError: (error: any) => {\n          config.onError?.({\n            code: error.type || 'UNKNOWN',\n            message: error.message || 'An error occurred',\n            cause: error\n          });\n        }\n      }\n    };\n\n    this.cardPaymentBrick = await this.bricksBuilder.create(\n      'cardPayment',\n      containerId,\n      settings\n    );\n\n    return {\n      updateAmount: (amount: number) => {\n        // MercadoPago Bricks doesn't support dynamic amount update\n        // Would need to recreate the brick\n        console.warn('MercadoPago Bricks does not support dynamic amount update');\n      },\n      submit: async () => {\n        // Bricks handles submission internally\n        throw new Error('Use form submission instead');\n      },\n      unmount: () => {\n        this.cardPaymentBrick?.unmount();\n        this.cardPaymentBrick = null;\n      }\n    };\n  }\n\n  async getInstallments(amount: number, bin: string): Promise<InstallmentOption[]> {\n    const response = await this.mp.getInstallments({\n      amount: String(amount),\n      bin: bin\n    });\n\n    if (!response || response.length === 0) {\n      return [];\n    }\n\n    const payerCosts = response[0].payer_costs || [];\n\n    return payerCosts.map((cost: any, index: number) => ({\n      installments: cost.installments,\n      installmentAmount: cost.installment_amount,\n      totalAmount: cost.total_amount,\n      interestFree: cost.installment_rate === 0,\n      interestRate: cost.installment_rate,\n      recommended: index === 0\n    }));\n  }\n\n  destroy(): void {\n    if (this.cardPaymentBrick) {\n      this.cardPaymentBrick.unmount();\n      this.cardPaymentBrick = null;\n    }\n    this.mp = null;\n    this.bricksBuilder = null;\n  }\n}\n","import type {\n  PspAdapter,\n  CardPaymentConfig,\n  CardPaymentInstance,\n  InstallmentOption,\n  PaymentData\n} from '../types';\n\ndeclare global {\n  interface Window {\n    PagSeguro: any;\n  }\n}\n\n/**\n * PagSeguro (PagBank) Adapter\n *\n * @see https://dev.pagbank.uol.com.br/docs\n */\nexport class PagSeguroAdapter implements PspAdapter {\n  readonly provider = 'PAGSEGURO';\n\n  private publicKey: string = '';\n  private environment: string = 'sandbox';\n\n  /**\n   * Load PagSeguro SDK script dynamically.\n   */\n  private async loadScript(): Promise<void> {\n    if (window.PagSeguro) {\n      return;\n    }\n\n    const scriptUrl = this.environment === 'production'\n      ? 'https://assets.pagseguro.com.br/checkout-sdk-js/rc/dist/browser/pagseguro.min.js'\n      : 'https://stc.sandbox.pagseguro.uol.com.br/pagseguro/api/v2/checkout/pagseguro.directpayment.js';\n\n    return new Promise((resolve, reject) => {\n      const script = document.createElement('script');\n      script.src = scriptUrl;\n      script.async = true;\n      script.onload = () => resolve();\n      script.onerror = () => reject(new Error('Failed to load PagSeguro SDK'));\n      document.head.appendChild(script);\n    });\n  }\n\n  async init(publicKey: string, options?: Record<string, unknown>): Promise<void> {\n    this.publicKey = publicKey;\n    this.environment = (options?.environment as string) || 'sandbox';\n\n    await this.loadScript();\n\n    // PagSeguro requires session initialization\n    // This would typically be done via your backend\n  }\n\n  async createCardPayment(\n    container: string | HTMLElement,\n    config: CardPaymentConfig\n  ): Promise<CardPaymentInstance> {\n    const containerEl = typeof container === 'string'\n      ? document.querySelector(container)\n      : container;\n\n    if (!containerEl) {\n      throw new Error(`Container not found: ${container}`);\n    }\n\n    // PagSeguro doesn't have a pre-built form like MercadoPago Bricks\n    // We need to create our own form and use their tokenization API\n    const formHtml = this.createFormHtml(config);\n    containerEl.innerHTML = formHtml;\n\n    const form = containerEl.querySelector('form') as HTMLFormElement;\n\n    form.addEventListener('submit', async (e) => {\n      e.preventDefault();\n\n      try {\n        const formData = new FormData(form);\n        const token = await this.tokenizeCard(formData);\n\n        const paymentData: PaymentData = {\n          token,\n          installments: parseInt(formData.get('installments') as string) || 1,\n          paymentMethodId: 'credit_card',\n          issuerId: '',\n          lastFourDigits: (formData.get('cardNumber') as string)?.slice(-4) || '',\n          cardholderName: formData.get('cardholderName') as string || '',\n          provider: this.provider\n        };\n\n        await config.onSubmit(paymentData);\n      } catch (error: any) {\n        config.onError?.({\n          code: 'TOKENIZATION_ERROR',\n          message: error.message || 'Failed to tokenize card',\n          cause: error\n        });\n      }\n    });\n\n    config.onReady?.();\n\n    return {\n      updateAmount: (amount: number) => {\n        const amountEl = form.querySelector('[data-amount]');\n        if (amountEl) {\n          amountEl.textContent = `R$ ${amount.toFixed(2)}`;\n        }\n      },\n      submit: async () => {\n        form.dispatchEvent(new Event('submit'));\n        return {} as PaymentData; // Will be handled by onSubmit\n      },\n      unmount: () => {\n        containerEl.innerHTML = '';\n      }\n    };\n  }\n\n  private createFormHtml(config: CardPaymentConfig): string {\n    return `\n      <form class=\"kairos-card-form\" data-kairos-form>\n        <div class=\"kairos-field\">\n          <label for=\"cardNumber\">Numero do Cartao</label>\n          <input type=\"text\" id=\"cardNumber\" name=\"cardNumber\"\n                 placeholder=\"0000 0000 0000 0000\"\n                 maxlength=\"19\" required />\n        </div>\n\n        <div class=\"kairos-field-row\">\n          <div class=\"kairos-field\">\n            <label for=\"expiry\">Validade</label>\n            <input type=\"text\" id=\"expiry\" name=\"expiry\"\n                   placeholder=\"MM/AA\" maxlength=\"5\" required />\n          </div>\n          <div class=\"kairos-field\">\n            <label for=\"cvv\">CVV</label>\n            <input type=\"text\" id=\"cvv\" name=\"cvv\"\n                   placeholder=\"123\" maxlength=\"3\" required />\n          </div>\n        </div>\n\n        <div class=\"kairos-field\">\n          <label for=\"cardholderName\">Nome no Cartao</label>\n          <input type=\"text\" id=\"cardholderName\" name=\"cardholderName\"\n                 placeholder=\"NOME COMO NO CARTAO\" required />\n        </div>\n\n        ${config.showInstallments !== false ? `\n        <div class=\"kairos-field\">\n          <label for=\"installments\">Parcelas</label>\n          <select id=\"installments\" name=\"installments\">\n            <option value=\"1\">1x de R$ ${config.amount.toFixed(2)}</option>\n          </select>\n        </div>\n        ` : ''}\n\n        <button type=\"submit\" class=\"kairos-submit-btn\">\n          Pagar <span data-amount>R$ ${config.amount.toFixed(2)}</span>\n        </button>\n      </form>\n    `;\n  }\n\n  private async tokenizeCard(formData: FormData): Promise<string> {\n    // PagSeguro card tokenization\n    // In a real implementation, this would call PagSeguro's API\n    const cardNumber = (formData.get('cardNumber') as string)?.replace(/\\s/g, '');\n    const [expMonth, expYear] = (formData.get('expiry') as string)?.split('/') || [];\n    const cvv = formData.get('cvv') as string;\n    const cardholderName = formData.get('cardholderName') as string;\n\n    // Call PagSeguro tokenization API\n    const response = await fetch('https://api.pagseguro.com/public-keys/card', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': this.publicKey\n      },\n      body: JSON.stringify({\n        card: {\n          number: cardNumber,\n          exp_month: expMonth,\n          exp_year: `20${expYear}`,\n          security_code: cvv,\n          holder: {\n            name: cardholderName\n          }\n        }\n      })\n    });\n\n    if (!response.ok) {\n      throw new Error('Failed to tokenize card with PagSeguro');\n    }\n\n    const data = await response.json();\n    return data.encrypted;\n  }\n\n  async getInstallments(amount: number, bin: string): Promise<InstallmentOption[]> {\n    // PagSeguro installment calculation\n    // This would typically be done via your backend\n    const maxInstallments = 12;\n    const options: InstallmentOption[] = [];\n\n    for (let i = 1; i <= maxInstallments; i++) {\n      const interestFree = i <= 3;\n      const rate = interestFree ? 0 : 0.0199; // 1.99% per month\n      const totalAmount = interestFree ? amount : amount * Math.pow(1 + rate, i);\n      const installmentAmount = totalAmount / i;\n\n      if (installmentAmount >= 5) { // Minimum R$ 5 per installment\n        options.push({\n          installments: i,\n          installmentAmount: Math.round(installmentAmount * 100) / 100,\n          totalAmount: Math.round(totalAmount * 100) / 100,\n          interestFree,\n          interestRate: interestFree ? 0 : rate * 100,\n          recommended: i === 1\n        });\n      }\n    }\n\n    return options;\n  }\n\n  destroy(): void {\n    // Cleanup if needed\n  }\n}\n","/**\n * Client-side card data encryption using Web Crypto API.\n *\n * Uses hybrid encryption: RSA-OAEP (key wrapping) + AES-256-GCM (data encryption).\n * The Kairos backend decrypts with the merchant's RSA private key.\n *\n * Each merchant has its own RSA key pair stored in the database.\n *\n * Flow:\n * 1. Fetch merchant's RSA public key from Kairos tokenization endpoint\n * 2. Generate random AES-256 key\n * 3. Encrypt card JSON with AES-GCM\n * 4. Wrap AES key with RSA-OAEP public key\n * 5. Combine as base64 JSON envelope\n */\n\nexport interface CardDataToEncrypt {\n  number: string;\n  holderName: string;\n  expirationMonth: string;\n  expirationYear: string;\n  cvv: string;\n}\n\n// Cache public keys per merchant (keyed by merchantId)\nconst keyCache = new Map<string, { key: CryptoKey; timestamp: number }>();\nconst CACHE_TTL = 24 * 60 * 60 * 1000; // 24 hours (keys are persisted in DB per merchant)\n\n/**\n * Fetch the RSA public key for a specific merchant from the Kairos tokenization endpoint.\n * Cached per merchant for 24 hours.\n */\nasync function fetchPublicKey(apiUrl: string, tenantId: string, merchantId?: string): Promise<CryptoKey> {\n  const cacheKey = merchantId || '__default__';\n  const now = Date.now();\n  const cached = keyCache.get(cacheKey);\n  if (cached && now - cached.timestamp < CACHE_TTL) {\n    return cached.key;\n  }\n\n  const params = merchantId ? `?merchantId=${merchantId}` : '';\n  const res = await fetch(\n    `${apiUrl}/api/v1/tokenization/${tenantId}/encryption-key${params}`\n  );\n  if (!res.ok) {\n    throw new Error(`Failed to fetch encryption key: ${res.status}`);\n  }\n\n  const data = await res.json();\n  const publicKeyBase64: string = data.publicKey;\n\n  // Decode base64 -> ArrayBuffer\n  const binaryString = atob(publicKeyBase64);\n  const bytes = new Uint8Array(binaryString.length);\n  for (let i = 0; i < binaryString.length; i++) {\n    bytes[i] = binaryString.charCodeAt(i);\n  }\n\n  // Import as RSA-OAEP public key (SPKI format)\n  const cryptoKey = await crypto.subtle.importKey(\n    'spki',\n    bytes.buffer,\n    { name: 'RSA-OAEP', hash: 'SHA-256' },\n    false,\n    ['wrapKey']\n  );\n  keyCache.set(cacheKey, { key: cryptoKey, timestamp: now });\n\n  return cryptoKey;\n}\n\n/**\n * Encrypt card data for secure transmission to the backend.\n *\n * @param cardData Raw card fields\n * @param apiUrl Kairos API base URL\n * @param tenantId Tenant identifier\n * @param merchantId Merchant UUID (each merchant has its own RSA key pair)\n * @returns Base64-encoded encrypted envelope\n */\nexport async function encryptCardData(\n  cardData: CardDataToEncrypt,\n  apiUrl: string,\n  tenantId: string,\n  merchantId?: string\n): Promise<string> {\n  const rsaKey = await fetchPublicKey(apiUrl, tenantId, merchantId);\n\n  // Compact JSON with short keys to minimize payload\n  const cardJson = JSON.stringify({\n    n: cardData.number,\n    h: cardData.holderName,\n    m: cardData.expirationMonth,\n    y: cardData.expirationYear,\n    c: cardData.cvv,\n  });\n\n  const encoder = new TextEncoder();\n  const plaintext = encoder.encode(cardJson);\n\n  // Generate random AES-256 key\n  const aesKey = await crypto.subtle.generateKey(\n    { name: 'AES-GCM', length: 256 },\n    true, // extractable (needed for RSA wrapping)\n    ['encrypt']\n  );\n\n  // Generate random 12-byte IV for AES-GCM\n  const iv = crypto.getRandomValues(new Uint8Array(12));\n\n  // Encrypt card data with AES-GCM\n  const ciphertext = await crypto.subtle.encrypt(\n    { name: 'AES-GCM', iv, tagLength: 128 },\n    aesKey,\n    plaintext\n  );\n\n  // Wrap (encrypt) the AES key with RSA-OAEP\n  const wrappedKey = await crypto.subtle.wrapKey(\n    'raw',\n    aesKey,\n    rsaKey,\n    { name: 'RSA-OAEP' }\n  );\n\n  // Build envelope JSON and base64 encode\n  const envelope = JSON.stringify({\n    ek: arrayBufferToBase64(wrappedKey),   // encrypted key\n    iv: arrayBufferToBase64(iv.buffer),     // initialization vector\n    d: arrayBufferToBase64(ciphertext),     // encrypted data (includes GCM auth tag)\n  });\n\n  return btoa(envelope);\n}\n\n/**\n * Check if card encryption is available for a merchant (endpoint reachable).\n */\nexport async function isEncryptionAvailable(apiUrl: string, tenantId: string, merchantId?: string): Promise<boolean> {\n  try {\n    await fetchPublicKey(apiUrl, tenantId, merchantId);\n    return true;\n  } catch {\n    return false;\n  }\n}\n\n/**\n * Clear the cached public key for a specific merchant, or all if no merchantId.\n */\nexport function clearEncryptionCache(merchantId?: string): void {\n  if (merchantId) {\n    keyCache.delete(merchantId);\n  } else {\n    keyCache.clear();\n  }\n}\n\nfunction arrayBufferToBase64(buffer: ArrayBuffer): string {\n  const bytes = new Uint8Array(buffer);\n  let binary = '';\n  for (let i = 0; i < bytes.length; i++) {\n    binary += String.fromCharCode(bytes[i]);\n  }\n  return btoa(binary);\n}\n","import type {\n  PspAdapter,\n  CardPaymentConfig,\n  CardPaymentInstance,\n  InstallmentOption,\n  PaymentData\n} from '../types';\nimport { encryptCardData } from '../crypto/encryption';\n\n/**\n * Kairos Encrypted Adapter\n *\n * Renders a native card payment form and encrypts card data client-side\n * using RSA-OAEP + AES-256-GCM before transmission.\n *\n * Used as fallback when no PSP with client-side tokenization is available\n * (e.g., Asaas), or when the tenant explicitly prefers Kairos encryption.\n *\n * Card data never leaves the browser unencrypted.\n *\n * Styling: Uses CSS custom properties (--kairos-*) so host apps can override\n * colors, fonts, and borders. Falls back to sensible defaults and inherits\n * font-family from the parent element.\n */\nexport class KairosEncryptedAdapter implements PspAdapter {\n  readonly provider = 'KAIROS';\n\n  private apiUrl: string = '';\n  private tenantId: string = '';\n  private merchantId: string = '';\n\n  async init(_publicKey: string, options?: Record<string, unknown>): Promise<void> {\n    this.apiUrl = (options?.apiUrl as string) || 'https://api.kairoshub.tech';\n    this.tenantId = (options?.tenantId as string) || '';\n    this.merchantId = (options?.merchantId as string) || '';\n  }\n\n  async createCardPayment(\n    container: string | HTMLElement,\n    config: CardPaymentConfig\n  ): Promise<CardPaymentInstance> {\n    const containerEl = typeof container === 'string'\n      ? document.querySelector(container)\n      : container;\n\n    if (!containerEl) {\n      throw new Error(`Container not found: ${container}`);\n    }\n\n    // Inject styles + form HTML\n    containerEl.innerHTML = this.buildFormHtml(config);\n\n    const form = containerEl.querySelector('[data-kairos-enc-form]') as HTMLFormElement;\n    const errorEl = containerEl.querySelector('[data-kairos-enc-error]') as HTMLElement;\n    const submitBtn = containerEl.querySelector('[data-kairos-enc-submit]') as HTMLButtonElement;\n    const cardNumberInput = containerEl.querySelector('[data-kairos-enc-card-number]') as HTMLInputElement;\n    const expiryInput = containerEl.querySelector('[data-kairos-enc-expiry]') as HTMLInputElement;\n    const cvvInput = containerEl.querySelector('[data-kairos-enc-cvv]') as HTMLInputElement;\n    const nameInput = containerEl.querySelector('[data-kairos-enc-name]') as HTMLInputElement;\n    const installmentsSelect = containerEl.querySelector('[data-kairos-enc-installments]') as HTMLSelectElement;\n    const brandBadge = containerEl.querySelector('[data-kairos-enc-brand]') as HTMLElement;\n\n    // Card number formatting\n    cardNumberInput.addEventListener('input', () => {\n      const digits = cardNumberInput.value.replace(/\\D/g, '').slice(0, 16);\n      cardNumberInput.value = digits.replace(/(\\d{4})(?=\\d)/g, '$1 ');\n      // Detect brand\n      const brand = detectCardBrand(digits);\n      if (brandBadge) {\n        brandBadge.textContent = brand ? brand.toUpperCase() : '';\n        brandBadge.style.display = brand ? 'block' : 'none';\n      }\n    });\n\n    // Expiry formatting\n    expiryInput.addEventListener('input', () => {\n      const digits = expiryInput.value.replace(/\\D/g, '').slice(0, 4);\n      if (digits.length >= 3) {\n        expiryInput.value = `${digits.slice(0, 2)}/${digits.slice(2)}`;\n      } else {\n        expiryInput.value = digits;\n      }\n    });\n\n    // CVV: digits only\n    cvvInput.addEventListener('input', () => {\n      cvvInput.value = cvvInput.value.replace(/\\D/g, '').slice(0, 3);\n    });\n\n    // Name: uppercase\n    nameInput.addEventListener('input', () => {\n      nameInput.value = nameInput.value.toUpperCase();\n    });\n\n    // Load installments\n    if (installmentsSelect) {\n      const installments = await this.getInstallments(config.amount, '');\n      const limited = installments.filter(o => o.installments <= (config.maxInstallments || 12));\n      installmentsSelect.innerHTML = limited.map(opt => {\n        const amountStr = opt.installmentAmount.toFixed(2).replace('.', ',');\n        const suffix = opt.interestFree\n          ? ' sem juros'\n          : ` (Total: R$ ${opt.totalAmount.toFixed(2).replace('.', ',')})`;\n        return `<option value=\"${opt.installments}\">${opt.installments}x de R$ ${amountStr}${suffix}</option>`;\n      }).join('');\n    }\n\n    // Submit handler\n    form.addEventListener('submit', async (e) => {\n      e.preventDefault();\n      if (submitBtn.disabled) return;\n\n      // Validate\n      const validationError = this.validate(cardNumberInput.value, expiryInput.value, cvvInput.value, nameInput.value);\n      if (validationError) {\n        errorEl.textContent = validationError;\n        errorEl.style.display = 'block';\n        config.onError?.({ code: 'VALIDATION_ERROR', message: validationError });\n        return;\n      }\n\n      errorEl.style.display = 'none';\n      submitBtn.disabled = true;\n      const originalText = submitBtn.innerHTML;\n      submitBtn.innerHTML = this.getLoadingButtonHtml();\n\n      try {\n        const cleanNumber = cardNumberInput.value.replace(/\\D/g, '');\n        const [mm, yy] = expiryInput.value.split('/');\n        const expirationYear = (2000 + parseInt(yy || '0', 10)).toString();\n\n        // Encrypt card data client-side\n        const encrypted = await encryptCardData(\n          {\n            number: cleanNumber,\n            holderName: nameInput.value.trim(),\n            expirationMonth: mm,\n            expirationYear,\n            cvv: cvvInput.value,\n          },\n          this.apiUrl,\n          this.tenantId,\n          this.merchantId\n        );\n\n        const paymentData: PaymentData = {\n          token: '',\n          encryptedData: encrypted,\n          installments: installmentsSelect ? parseInt(installmentsSelect.value) : 1,\n          paymentMethodId: detectCardBrand(cleanNumber) || 'unknown',\n          issuerId: '',\n          lastFourDigits: cleanNumber.slice(-4),\n          cardholderName: nameInput.value.trim(),\n          provider: this.provider,\n        };\n\n        await config.onSubmit(paymentData);\n      } catch (err: any) {\n        errorEl.textContent = err.message || 'Erro ao processar pagamento';\n        errorEl.style.display = 'block';\n        config.onError?.({\n          code: 'ENCRYPTION_ERROR',\n          message: err.message || 'Failed to encrypt card data',\n          cause: err,\n        });\n      } finally {\n        submitBtn.disabled = false;\n        submitBtn.innerHTML = originalText;\n      }\n    });\n\n    config.onReady?.();\n\n    return {\n      updateAmount: (amount: number) => {\n        const amountEl = containerEl.querySelector('[data-kairos-enc-amount]');\n        if (amountEl) {\n          amountEl.textContent = `R$ ${amount.toFixed(2).replace('.', ',')}`;\n        }\n      },\n      submit: async () => {\n        form.dispatchEvent(new Event('submit', { bubbles: true, cancelable: true }));\n        return {} as PaymentData;\n      },\n      unmount: () => {\n        containerEl.innerHTML = '';\n      },\n    };\n  }\n\n  async getInstallments(amount: number, _bin: string): Promise<InstallmentOption[]> {\n    const maxInstallments = 12;\n    const options: InstallmentOption[] = [];\n\n    for (let i = 1; i <= maxInstallments; i++) {\n      const interestFree = i <= 3;\n      const rate = interestFree ? 0 : 0.0199;\n      const totalAmount = interestFree ? amount : amount * Math.pow(1 + rate, i);\n      const installmentAmount = totalAmount / i;\n\n      if (installmentAmount >= 5) {\n        options.push({\n          installments: i,\n          installmentAmount: Math.round(installmentAmount * 100) / 100,\n          totalAmount: Math.round(totalAmount * 100) / 100,\n          interestFree,\n          interestRate: interestFree ? 0 : rate * 100,\n          recommended: i === 1,\n        });\n      }\n    }\n\n    return options;\n  }\n\n  destroy(): void {\n    // No external SDK to clean up\n  }\n\n  private validate(cardNumber: string, expiry: string, cvv: string, name: string): string | null {\n    const cleanNumber = cardNumber.replace(/\\D/g, '');\n    if (cleanNumber.length < 13) return 'Numero do cartao invalido';\n    if (expiry.length < 5) return 'Data de validade invalida';\n\n    const [mm, yy] = expiry.split('/');\n    const month = parseInt(mm, 10);\n    if (month < 1 || month > 12) return 'Mes invalido';\n\n    const year = 2000 + parseInt(yy || '0', 10);\n    const now = new Date();\n    if (year < now.getFullYear() || (year === now.getFullYear() && month < now.getMonth() + 1)) {\n      return 'Cartao expirado';\n    }\n\n    if (cvv.length !== 3) return 'CVV invalido';\n    if (name.trim().length < 3) return 'Nome invalido';\n    return null;\n  }\n\n  private getLoadingButtonHtml(): string {\n    return `\n      <svg class=\"kairos-enc-spinner\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n        <circle cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"3\" stroke-linecap=\"round\" stroke-dasharray=\"32\" stroke-dashoffset=\"32\">\n          <animate attributeName=\"stroke-dashoffset\" values=\"32;0;32\" dur=\"1.2s\" repeatCount=\"indefinite\"/>\n          <animateTransform attributeName=\"transform\" type=\"rotate\" from=\"0 12 12\" to=\"360 12 12\" dur=\"0.8s\" repeatCount=\"indefinite\"/>\n        </circle>\n      </svg>\n      <span>Criptografando...</span>\n    `;\n  }\n\n  private buildFormHtml(config: CardPaymentConfig): string {\n    const amountFormatted = config.amount.toFixed(2).replace('.', ',');\n\n    // Kairos brand logo SVG (matches console icon)\n    const kairosLogoSvg = `<svg width=\"18\" height=\"18\" viewBox=\"0 0 48 48\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <defs>\n        <linearGradient id=\"kairos-logo-grad\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\n          <stop offset=\"0%\" style=\"stop-color:#3B82F6\"/>\n          <stop offset=\"100%\" style=\"stop-color:#8B5CF6\"/>\n        </linearGradient>\n      </defs>\n      <circle cx=\"24\" cy=\"24\" r=\"22\" fill=\"url(#kairos-logo-grad)\"/>\n      <path d=\"M16 12 L16 36 M16 24 L32 12 M16 24 L32 36\" stroke=\"white\" stroke-width=\"4\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n      <circle cx=\"36\" cy=\"36\" r=\"5\" fill=\"#10B981\"/>\n    </svg>`;\n\n    return `\n      <style>\n        /*\n         * Kairos Payments SDK — Card Form Styles\n         *\n         * Override with CSS custom properties on the parent element:\n         *   --kairos-font:        Font family (default: inherit)\n         *   --kairos-text:        Text color (default: inherit)\n         *   --kairos-text-muted:  Muted text / labels (default: inherit with opacity)\n         *   --kairos-bg:          Input background (default: transparent)\n         *   --kairos-border:      Border color (default: currentColor with opacity)\n         *   --kairos-radius:      Border radius (default: 8px)\n         *   --kairos-focus:       Focus ring color (default: #7c3aed)\n         *   --kairos-accent:      Button gradient start (default: #7c3aed)\n         *   --kairos-accent-end:  Button gradient end (default: #9333ea)\n         *   --kairos-success:     Security badge color (default: #059669)\n         */\n        .kairos-enc-form {\n          font-family: var(--kairos-font, inherit);\n          color: var(--kairos-text, inherit);\n          display: flex;\n          flex-direction: column;\n          gap: 16px;\n        }\n        .kairos-enc-field {\n          display: flex;\n          flex-direction: column;\n          gap: 6px;\n        }\n        .kairos-enc-field label {\n          font-size: 13px;\n          font-weight: 500;\n          opacity: 0.7;\n        }\n        .kairos-enc-field input,\n        .kairos-enc-field select {\n          height: 44px;\n          padding: 0 12px;\n          border: 1px solid var(--kairos-border, color-mix(in srgb, currentColor 25%, transparent));\n          border-radius: var(--kairos-radius, 8px);\n          font-size: 15px;\n          font-family: inherit;\n          color: inherit;\n          background: var(--kairos-bg, transparent);\n          outline: none;\n          transition: border-color 0.15s, box-shadow 0.15s;\n          -webkit-appearance: none;\n        }\n        .kairos-enc-field input:focus,\n        .kairos-enc-field select:focus {\n          border-color: var(--kairos-focus, #7c3aed);\n          box-shadow: 0 0 0 3px color-mix(in srgb, var(--kairos-focus, #7c3aed) 15%, transparent);\n        }\n        .kairos-enc-field input::placeholder {\n          color: inherit;\n          opacity: 0.4;\n        }\n        .kairos-enc-row {\n          display: grid;\n          grid-template-columns: 1fr 1fr;\n          gap: 12px;\n        }\n        .kairos-enc-card-number-wrapper {\n          position: relative;\n        }\n        .kairos-enc-brand {\n          position: absolute;\n          right: 12px;\n          top: 50%;\n          transform: translateY(-50%);\n          font-size: 11px;\n          font-weight: 700;\n          opacity: 0.5;\n          letter-spacing: 0.05em;\n          display: none;\n        }\n        .kairos-enc-error {\n          display: none;\n          padding: 10px 14px;\n          background: color-mix(in srgb, #ef4444 10%, transparent);\n          border: 1px solid color-mix(in srgb, #ef4444 25%, transparent);\n          border-radius: var(--kairos-radius, 8px);\n          color: #ef4444;\n          font-size: 13px;\n        }\n        .kairos-enc-security {\n          display: flex;\n          align-items: center;\n          gap: 10px;\n          padding: 12px 14px;\n          background: color-mix(in srgb, var(--kairos-success, #059669) 8%, transparent);\n          border: 1px solid color-mix(in srgb, var(--kairos-success, #059669) 20%, transparent);\n          border-radius: var(--kairos-radius, 8px);\n        }\n        .kairos-enc-security-icon {\n          flex-shrink: 0;\n          width: 28px;\n          height: 28px;\n          color: var(--kairos-success, #059669);\n        }\n        .kairos-enc-security-text {\n          flex: 1;\n          min-width: 0;\n        }\n        .kairos-enc-security-text strong {\n          display: block;\n          font-size: 13px;\n          font-weight: 600;\n          color: var(--kairos-success, #059669);\n        }\n        .kairos-enc-security-text span {\n          font-size: 11px;\n          color: var(--kairos-success, #059669);\n          opacity: 0.75;\n        }\n        .kairos-enc-security-badge {\n          display: flex;\n          align-items: center;\n          gap: 5px;\n          flex-shrink: 0;\n          color: var(--kairos-success, #059669);\n          opacity: 0.85;\n        }\n        .kairos-enc-security-badge svg {\n          width: 18px;\n          height: 18px;\n        }\n        .kairos-enc-security-lock {\n          width: 10px;\n          height: 10px;\n          opacity: 0.7;\n        }\n        .kairos-enc-submit {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          gap: 8px;\n          width: 100%;\n          height: 52px;\n          border: none;\n          border-radius: var(--kairos-radius, 8px);\n          font-size: 16px;\n          font-weight: 600;\n          font-family: inherit;\n          color: #fff;\n          background: linear-gradient(135deg, var(--kairos-accent, #7c3aed) 0%, var(--kairos-accent-end, #9333ea) 100%);\n          cursor: pointer;\n          transition: opacity 0.15s, transform 0.1s;\n        }\n        .kairos-enc-submit:hover:not(:disabled) {\n          opacity: 0.92;\n        }\n        .kairos-enc-submit:active:not(:disabled) {\n          transform: scale(0.98);\n        }\n        .kairos-enc-submit:disabled {\n          opacity: 0.6;\n          cursor: not-allowed;\n        }\n        .kairos-enc-submit svg {\n          width: 20px;\n          height: 20px;\n        }\n        .kairos-enc-spinner {\n          animation: kairos-enc-spin 0.8s linear infinite;\n        }\n        @keyframes kairos-enc-spin {\n          to { transform: rotate(360deg); }\n        }\n      </style>\n\n      <form class=\"kairos-enc-form\" data-kairos-enc-form>\n        <div data-kairos-enc-error class=\"kairos-enc-error\"></div>\n\n        <div class=\"kairos-enc-field\">\n          <label>Numero do Cartao</label>\n          <div class=\"kairos-enc-card-number-wrapper\">\n            <input\n              type=\"text\"\n              inputmode=\"numeric\"\n              placeholder=\"0000 0000 0000 0000\"\n              maxlength=\"19\"\n              autocomplete=\"cc-number\"\n              data-kairos-enc-card-number\n            />\n            <span class=\"kairos-enc-brand\" data-kairos-enc-brand></span>\n          </div>\n        </div>\n\n        <div class=\"kairos-enc-row\">\n          <div class=\"kairos-enc-field\">\n            <label>Validade</label>\n            <input\n              type=\"text\"\n              inputmode=\"numeric\"\n              placeholder=\"MM/AA\"\n              maxlength=\"5\"\n              autocomplete=\"cc-exp\"\n              data-kairos-enc-expiry\n            />\n          </div>\n          <div class=\"kairos-enc-field\">\n            <label>CVV</label>\n            <input\n              type=\"text\"\n              inputmode=\"numeric\"\n              placeholder=\"123\"\n              maxlength=\"3\"\n              autocomplete=\"cc-csc\"\n              data-kairos-enc-cvv\n            />\n          </div>\n        </div>\n\n        <div class=\"kairos-enc-field\">\n          <label>Nome no Cartao</label>\n          <input\n            type=\"text\"\n            placeholder=\"NOME COMO NO CARTAO\"\n            autocomplete=\"cc-name\"\n            data-kairos-enc-name\n          />\n        </div>\n\n        ${config.showInstallments !== false ? `\n        <div class=\"kairos-enc-field\">\n          <label>Parcelas</label>\n          <select data-kairos-enc-installments>\n            <option value=\"1\">1x de R$ ${amountFormatted} sem juros</option>\n          </select>\n        </div>\n        ` : ''}\n\n        <div class=\"kairos-enc-security\">\n          <svg class=\"kairos-enc-security-icon\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n            <path d=\"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z\"/>\n            <path d=\"m9 12 2 2 4-4\"/>\n          </svg>\n          <div class=\"kairos-enc-security-text\">\n            <strong>Pagamento Seguro</strong>\n            <span>Criptografia ponta a ponta via Kairos Payment Hub</span>\n          </div>\n          <div class=\"kairos-enc-security-badge\">\n            <svg class=\"kairos-enc-security-lock\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n              <rect x=\"3\" y=\"11\" width=\"18\" height=\"11\" rx=\"2\" ry=\"2\"/>\n              <path d=\"M7 11V7a5 5 0 0 1 10 0v4\"/>\n            </svg>\n            ${kairosLogoSvg}\n          </div>\n        </div>\n\n        <button type=\"submit\" class=\"kairos-enc-submit\" data-kairos-enc-submit>\n          <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n            <rect x=\"1\" y=\"4\" width=\"22\" height=\"16\" rx=\"2\" ry=\"2\"/>\n            <line x1=\"1\" y1=\"10\" x2=\"23\" y2=\"10\"/>\n          </svg>\n          <span>Pagar <span data-kairos-enc-amount>R$ ${amountFormatted}</span></span>\n        </button>\n      </form>\n    `;\n  }\n}\n\n/** Detect card brand from BIN (first digits). */\nfunction detectCardBrand(number: string): string {\n  const clean = number.replace(/\\D/g, '');\n  if (/^4/.test(clean)) return 'visa';\n  if (/^5[1-5]/.test(clean)) return 'mastercard';\n  if (/^3[47]/.test(clean)) return 'amex';\n  if (/^(636368|438935|504175|451416|636297)/.test(clean) || /^(5067|4576|4011)/.test(clean)) return 'elo';\n  if (/^606282/.test(clean)) return 'hipercard';\n  return '';\n}\n","import type {\n  KairosConfig,\n  CardPaymentConfig,\n  TokenizationOptions,\n  TokenizationOption,\n  InstallmentOption,\n  PspAdapter,\n  CardPaymentInstance\n} from '../types';\nimport { MercadoPagoAdapter } from '../adapters/MercadoPagoAdapter';\nimport { PagSeguroAdapter } from '../adapters/PagSeguroAdapter';\nimport { KairosEncryptedAdapter } from '../adapters/KairosEncryptedAdapter';\n\n/**\n * Main entry point for Kairos Payments SDK.\n *\n * @example\n * ```typescript\n * const kairos = await KairosPayments.init({\n *   tenantId: 'faithlink',\n *   environment: 'production'\n * });\n *\n * await kairos.createCardPayment('#card-form', {\n *   amount: 100.00,\n *   onSubmit: (data) => console.log(data.token)\n * });\n * ```\n */\nexport class KairosPayments {\n  private config: Required<KairosConfig>;\n  private options: TokenizationOption[] = [];\n  private adapter: PspAdapter | null = null;\n  private cardInstance: CardPaymentInstance | null = null;\n\n  private constructor(config: KairosConfig) {\n    this.config = {\n      tenantId: config.tenantId,\n      merchantId: config.merchantId || '',\n      environment: config.environment || 'production',\n      apiUrl: config.apiUrl || 'https://api.kairoshub.tech',\n      preferredProvider: config.preferredProvider || undefined as any,\n      locale: config.locale || 'pt-BR',\n      debug: config.debug || false\n    };\n  }\n\n  /**\n   * Initialize the Kairos Payments SDK.\n   * Fetches available PSPs and their public keys from the Kairos API.\n   */\n  static async init(config: KairosConfig): Promise<KairosPayments> {\n    const instance = new KairosPayments(config);\n    await instance.fetchOptions();\n    return instance;\n  }\n\n  /**\n   * Fetch tokenization options from Kairos API.\n   * Non-fatal: if no PSP options are available, KairosEncryptedAdapter is used as fallback.\n   */\n  private async fetchOptions(): Promise<void> {\n    const url = `${this.config.apiUrl}/api/v1/tokenization/${this.config.tenantId}/options`;\n\n    this.log('Fetching tokenization options from', url);\n\n    try {\n      const response = await fetch(url);\n\n      if (!response.ok) {\n        this.log('Failed to fetch tokenization options:', response.status);\n        this.options = [];\n        return;\n      }\n\n      const data: TokenizationOptions = await response.json();\n      this.options = data.options || [];\n\n      this.log('Available PSPs:', this.options.map(o => o.provider));\n    } catch (err) {\n      // Network error — Kairos encrypted adapter will be used as fallback\n      this.log('Error fetching tokenization options, will use Kairos encryption:', err);\n      this.options = [];\n    }\n  }\n\n  /**\n   * Get the best available PSP adapter.\n   *\n   * Selection priority:\n   * 1. If preferredProvider is 'KAIROS', use KairosEncryptedAdapter (our own encryption)\n   * 2. If preferredProvider matches a PSP option, use that PSP adapter\n   * 3. Use the first available PSP option\n   * 4. Fallback to KairosEncryptedAdapter when no PSP has client-side tokenization\n   */\n  private async getAdapter(): Promise<PspAdapter> {\n    if (this.adapter) {\n      return this.adapter;\n    }\n\n    // If KAIROS is explicitly preferred, use our encrypted adapter directly\n    if (this.config.preferredProvider === 'KAIROS') {\n      this.log('Using Kairos Encrypted adapter (preferred)');\n      return this.initKairosAdapter();\n    }\n\n    // Find preferred or first available PSP\n    let option = this.options[0];\n\n    if (this.config.preferredProvider) {\n      const preferred = this.options.find(\n        o => o.provider === this.config.preferredProvider\n      );\n      if (preferred) {\n        option = preferred;\n      }\n    }\n\n    // Fallback to Kairos encryption when no PSP with client-side tokenization\n    if (!option) {\n      this.log('No PSP with client-side tokenization available, falling back to Kairos encryption');\n      return this.initKairosAdapter();\n    }\n\n    this.log('Using PSP:', option.provider);\n\n    // Create adapter based on provider\n    switch (option.provider) {\n      case 'MERCADOPAGO':\n        this.adapter = new MercadoPagoAdapter();\n        break;\n      case 'PAGSEGURO':\n        this.adapter = new PagSeguroAdapter();\n        break;\n      default:\n        // Unknown PSP — try Kairos encrypted adapter as fallback\n        this.log(`Unknown PSP provider \"${option.provider}\", falling back to Kairos encryption`);\n        return this.initKairosAdapter();\n    }\n\n    // Initialize adapter with public key\n    await this.adapter.init(option.publicKey, {\n      locale: this.config.locale,\n      environment: option.environment\n    });\n\n    return this.adapter;\n  }\n\n  /**\n   * Initialize the Kairos Encrypted adapter (our own card form + encryption).\n   */\n  private async initKairosAdapter(): Promise<PspAdapter> {\n    this.adapter = new KairosEncryptedAdapter();\n    await this.adapter.init('', {\n      apiUrl: this.config.apiUrl,\n      tenantId: this.config.tenantId,\n      merchantId: this.config.merchantId,\n      locale: this.config.locale,\n    });\n    return this.adapter;\n  }\n\n  /**\n   * Create a card payment form.\n   *\n   * @param container - CSS selector or HTMLElement where the form will be mounted\n   * @param config - Payment configuration\n   * @returns Promise resolving to a CardPaymentInstance\n   */\n  async createCardPayment(\n    container: string | HTMLElement,\n    config: CardPaymentConfig\n  ): Promise<CardPaymentInstance> {\n    const adapter = await this.getAdapter();\n\n    this.log('Creating card payment form with amount:', config.amount);\n\n    this.cardInstance = await adapter.createCardPayment(container, config);\n    return this.cardInstance;\n  }\n\n  /**\n   * Get installment options for a given amount.\n   *\n   * @param amount - Payment amount in BRL\n   * @param bin - First 6 digits of the card number\n   * @returns Promise resolving to installment options\n   */\n  async getInstallments(amount: number, bin: string): Promise<InstallmentOption[]> {\n    const adapter = await this.getAdapter();\n    return adapter.getInstallments(amount, bin);\n  }\n\n  /**\n   * Get available PSP options for this tenant.\n   */\n  getAvailableProviders(): TokenizationOption[] {\n    return [...this.options];\n  }\n\n  /**\n   * Get current configuration.\n   */\n  getConfig(): Readonly<KairosConfig> {\n    return { ...this.config };\n  }\n\n  /**\n   * Destroy the SDK instance and cleanup resources.\n   */\n  destroy(): void {\n    if (this.cardInstance) {\n      this.cardInstance.unmount();\n      this.cardInstance = null;\n    }\n    if (this.adapter) {\n      this.adapter.destroy();\n      this.adapter = null;\n    }\n    this.options = [];\n  }\n\n  private log(...args: unknown[]): void {\n    if (this.config.debug) {\n      console.log('[Kairos]', ...args);\n    }\n  }\n}\n","/**\n * React component for card payment form.\n *\n * @example\n * ```tsx\n * import { CardPaymentForm } from '@kairos/payments-js';\n *\n * function Checkout() {\n *   return (\n *     <CardPaymentForm\n *       tenantId=\"faithlink\"\n *       amount={100.00}\n *       onSuccess={(data) => console.log('Token:', data.token)}\n *       onError={(error) => console.error(error)}\n *     />\n *   );\n * }\n * ```\n */\n\nimport { useEffect, useRef, useState } from 'react';\nimport { KairosPayments } from '../core/KairosPayments';\nimport type { CardPaymentConfig, PaymentData, PaymentError, KairosConfig } from '../types';\n\nexport interface CardPaymentFormProps {\n  /** Tenant identifier */\n  tenantId: string;\n\n  /** Payment amount in BRL */\n  amount: number;\n\n  /** Environment */\n  environment?: 'sandbox' | 'production';\n\n  /** API URL (optional) */\n  apiUrl?: string;\n\n  /** Preferred PSP provider */\n  preferredProvider?: 'MERCADOPAGO' | 'PAGSEGURO' | 'KAIROS';\n\n  /** Maximum installments */\n  maxInstallments?: number;\n\n  /** Callback on successful payment */\n  onSuccess: (data: PaymentData) => void;\n\n  /** Callback on error */\n  onError?: (error: PaymentError) => void;\n\n  /** Callback when form is ready */\n  onReady?: () => void;\n\n  /** Custom class name */\n  className?: string;\n\n  /** Debug mode */\n  debug?: boolean;\n}\n\nexport function CardPaymentForm({\n  tenantId,\n  amount,\n  environment = 'production',\n  apiUrl,\n  preferredProvider,\n  maxInstallments = 12,\n  onSuccess,\n  onError,\n  onReady,\n  className,\n  debug = false\n}: CardPaymentFormProps) {\n  const containerRef = useRef<HTMLDivElement>(null);\n  const kairosRef = useRef<KairosPayments | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    let mounted = true;\n\n    async function initKairos() {\n      if (!containerRef.current) return;\n\n      try {\n        setLoading(true);\n        setError(null);\n\n        const config: KairosConfig = {\n          tenantId,\n          environment,\n          apiUrl,\n          preferredProvider,\n          debug\n        };\n\n        const kairos = await KairosPayments.init(config);\n\n        if (!mounted) {\n          kairos.destroy();\n          return;\n        }\n\n        kairosRef.current = kairos;\n\n        const paymentConfig: CardPaymentConfig = {\n          amount,\n          maxInstallments,\n          onReady: () => {\n            setLoading(false);\n            onReady?.();\n          },\n          onSubmit: async (data) => {\n            onSuccess(data);\n          },\n          onError: (err) => {\n            setError(err.message);\n            onError?.(err);\n          }\n        };\n\n        await kairos.createCardPayment(containerRef.current, paymentConfig);\n      } catch (err: any) {\n        if (mounted) {\n          const errorMessage = err.message || 'Failed to initialize payment form';\n          setError(errorMessage);\n          setLoading(false);\n          onError?.({\n            code: 'INIT_ERROR',\n            message: errorMessage,\n            cause: err\n          });\n        }\n      }\n    }\n\n    initKairos();\n\n    return () => {\n      mounted = false;\n      if (kairosRef.current) {\n        kairosRef.current.destroy();\n        kairosRef.current = null;\n      }\n    };\n  }, [tenantId, amount, environment, apiUrl, preferredProvider]);\n\n  return (\n    <div className={className}>\n      {loading && (\n        <div className=\"kairos-loading\">\n          <div className=\"kairos-spinner\" />\n          <span>Carregando formulario de pagamento...</span>\n        </div>\n      )}\n\n      {error && (\n        <div className=\"kairos-error\">\n          <span>{error}</span>\n        </div>\n      )}\n\n      <div\n        ref={containerRef}\n        id=\"kairos-card-payment-container\"\n        style={{ display: loading ? 'none' : 'block' }}\n      />\n\n      {!loading && !error && (\n        <div className=\"kairos-branding\" style={brandingStyles}>\n          <KairosLogo />\n          <span style={brandingTextStyle}>Powered by Kairos</span>\n        </div>\n      )}\n    </div>\n  );\n}\n\nconst brandingStyles: React.CSSProperties = {\n  display: 'flex',\n  alignItems: 'center',\n  justifyContent: 'center',\n  gap: '6px',\n  padding: '8px 0 4px',\n  opacity: 0.6,\n};\n\nconst brandingTextStyle: React.CSSProperties = {\n  fontSize: '11px',\n  fontFamily: '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, sans-serif',\n  color: '#6b7280',\n  letterSpacing: '0.02em',\n};\n\nfunction KairosLogo() {\n  return (\n    <svg width=\"14\" height=\"14\" viewBox=\"0 0 48 48\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <defs>\n        <linearGradient id=\"kairos-form-grad\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\n          <stop offset=\"0%\" stopColor=\"#3B82F6\"/>\n          <stop offset=\"100%\" stopColor=\"#8B5CF6\"/>\n        </linearGradient>\n      </defs>\n      <circle cx=\"24\" cy=\"24\" r=\"22\" fill=\"url(#kairos-form-grad)\"/>\n      <path d=\"M16 12 L16 36 M16 24 L32 12 M16 24 L32 36\" stroke=\"white\" strokeWidth=\"4\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n      <circle cx=\"36\" cy=\"36\" r=\"5\" fill=\"#10B981\"/>\n    </svg>\n  );\n}\n","/**\n * PixQrCode — Renders a PIX QR code with copy-paste (\"copia e cola\") functionality.\n *\n * This component is framework-agnostic (vanilla DOM). It renders:\n * - QR code image (from base64 or generated client-side via Canvas)\n * - Copy \"copia e cola\" button\n * - Countdown timer (optional, for dynamic PIX)\n * - Amount display\n *\n * Styling: Uses CSS custom properties (--kairos-*) so host apps can override\n * colors, fonts, and borders. Falls back to sensible defaults.\n *\n * @example\n * ```typescript\n * import { PixQrCode } from '@kairos/payments-js';\n *\n * const pix = new PixQrCode('#pix-container', {\n *   amount: 50.00,\n *   copyPaste: 'MDAwMjAxMjYzMzAwMTR...',\n *   qrCodeBase64: 'data:image/png;base64,...', // optional\n *   expiresAt: '2026-02-17T15:30:00Z',        // optional\n *   onCopy: () => console.log('Copied!'),\n *   onExpired: () => console.log('Expired!'),\n * });\n *\n * // Later:\n * pix.destroy();\n * ```\n */\n\nexport interface PixQrCodeConfig {\n  /** Payment amount in BRL */\n  amount: number;\n\n  /** PIX copia e cola payload (the text string users paste into their bank app) */\n  copyPaste: string;\n\n  /** QR code as base64 data URI or raw base64 string (optional — generated from copyPaste if omitted) */\n  qrCodeBase64?: string;\n\n  /** Expiration timestamp ISO string (optional — no countdown if omitted) */\n  expiresAt?: string;\n\n  /** Locale for labels (default: 'pt-BR') */\n  locale?: 'pt-BR' | 'en-US' | 'es';\n\n  /** Callback when the copia e cola code is copied */\n  onCopy?: () => void;\n\n  /** Callback when the PIX expires */\n  onExpired?: () => void;\n\n  /** QR code size in pixels (default: 200) */\n  qrSize?: number;\n}\n\nexport interface PixQrCodeInstance {\n  /** Copy the copia e cola code to clipboard programmatically */\n  copyToClipboard(): Promise<void>;\n\n  /** Destroy the component and clean up timers */\n  destroy(): void;\n}\n\nexport function createPixQrCode(\n  container: string | HTMLElement,\n  config: PixQrCodeConfig\n): PixQrCodeInstance {\n  const containerEl = typeof container === 'string'\n    ? document.querySelector<HTMLElement>(container)\n    : container;\n\n  if (!containerEl) {\n    throw new Error(`PixQrCode: container not found: ${container}`);\n  }\n\n  const locale = config.locale || 'pt-BR';\n  const qrSize = config.qrSize || 200;\n  const labels = getLabels(locale);\n  let countdownInterval: ReturnType<typeof setInterval> | null = null;\n  let copyTimeout: ReturnType<typeof setTimeout> | null = null;\n  let expired = false;\n\n  // Render HTML\n  containerEl.innerHTML = buildHtml(config, labels, qrSize);\n\n  // Inject styles (once per page)\n  injectStyles();\n\n  // Resolve QR code image\n  const qrImg = containerEl.querySelector('[data-kairos-pix-qr]') as HTMLImageElement | null;\n  const qrPlaceholder = containerEl.querySelector('[data-kairos-pix-qr-placeholder]') as HTMLElement | null;\n\n  resolveQrImage(config, qrSize).then((src) => {\n    if (qrImg && src) {\n      qrImg.src = src;\n      qrImg.style.display = 'block';\n      if (qrPlaceholder) qrPlaceholder.style.display = 'none';\n    }\n  });\n\n  // Copy button handler\n  const copyBtn = containerEl.querySelector('[data-kairos-pix-copy]') as HTMLButtonElement | null;\n  const copyLabel = containerEl.querySelector('[data-kairos-pix-copy-label]') as HTMLElement | null;\n\n  const doCopy = async () => {\n    if (!config.copyPaste || expired) return;\n    try {\n      await navigator.clipboard.writeText(config.copyPaste);\n      if (copyLabel) {\n        copyLabel.textContent = labels.copied;\n        if (copyTimeout) clearTimeout(copyTimeout);\n        copyTimeout = setTimeout(() => {\n          if (copyLabel) copyLabel.textContent = labels.copyCode;\n        }, 3000);\n      }\n      config.onCopy?.();\n    } catch {\n      // Fallback: select text from a hidden textarea\n      const ta = document.createElement('textarea');\n      ta.value = config.copyPaste;\n      ta.style.position = 'fixed';\n      ta.style.left = '-9999px';\n      document.body.appendChild(ta);\n      ta.select();\n      document.execCommand('copy');\n      document.body.removeChild(ta);\n      if (copyLabel) {\n        copyLabel.textContent = labels.copied;\n        if (copyTimeout) clearTimeout(copyTimeout);\n        copyTimeout = setTimeout(() => {\n          if (copyLabel) copyLabel.textContent = labels.copyCode;\n        }, 3000);\n      }\n      config.onCopy?.();\n    }\n  };\n\n  copyBtn?.addEventListener('click', doCopy);\n\n  // Countdown timer\n  const countdownEl = containerEl.querySelector('[data-kairos-pix-countdown]') as HTMLElement | null;\n  const expiryRow = containerEl.querySelector('[data-kairos-pix-expiry-row]') as HTMLElement | null;\n  const expiredOverlay = containerEl.querySelector('[data-kairos-pix-expired]') as HTMLElement | null;\n\n  if (config.expiresAt) {\n    countdownInterval = setInterval(() => {\n      const now = Date.now();\n      const expiresMs = new Date(config.expiresAt!).getTime();\n      const diff = Math.max(0, Math.floor((expiresMs - now) / 1000));\n\n      if (countdownEl) {\n        const mins = Math.floor(diff / 60);\n        const secs = diff % 60;\n        countdownEl.textContent = `${mins}:${secs.toString().padStart(2, '0')}`;\n      }\n\n      if (diff === 0 && !expired) {\n        expired = true;\n        if (countdownInterval) {\n          clearInterval(countdownInterval);\n          countdownInterval = null;\n        }\n        if (expiryRow) expiryRow.style.display = 'none';\n        if (expiredOverlay) expiredOverlay.style.display = 'flex';\n        if (copyBtn) copyBtn.style.display = 'none';\n        config.onExpired?.();\n      }\n    }, 1000);\n  }\n\n  return {\n    copyToClipboard: doCopy,\n    destroy() {\n      if (countdownInterval) clearInterval(countdownInterval);\n      if (copyTimeout) clearTimeout(copyTimeout);\n      containerEl.innerHTML = '';\n    },\n  };\n}\n\n// ---------------------------------------------------------------------------\n// Internals\n// ---------------------------------------------------------------------------\n\nfunction getLabels(locale: string) {\n  if (locale === 'en-US') {\n    return {\n      amountLabel: 'Amount to pay',\n      copyCode: 'Copy PIX code',\n      copied: 'Code copied!',\n      waiting: 'Waiting for payment...',\n      expiresIn: 'Expires in',\n      expired: 'QR Code expired',\n    };\n  }\n  if (locale === 'es') {\n    return {\n      amountLabel: 'Monto a pagar',\n      copyCode: 'Copiar codigo PIX',\n      copied: 'Codigo copiado!',\n      waiting: 'Esperando pago...',\n      expiresIn: 'Expira en',\n      expired: 'QR Code expirado',\n    };\n  }\n  // pt-BR (default)\n  return {\n    amountLabel: 'Valor a pagar',\n    copyCode: 'Copiar codigo PIX',\n    copied: 'Codigo copiado!',\n    waiting: 'Aguardando pagamento...',\n    expiresIn: 'Expira em',\n    expired: 'QR Code expirado',\n  };\n}\n\nfunction buildHtml(\n  config: PixQrCodeConfig,\n  labels: ReturnType<typeof getLabels>,\n  qrSize: number\n): string {\n  const formattedAmount = new Intl.NumberFormat('pt-BR', {\n    style: 'currency',\n    currency: 'BRL',\n  }).format(config.amount);\n\n  const hasExpiry = !!config.expiresAt;\n\n  return `\n<div class=\"kairos-pix\" data-kairos-pix>\n  <div class=\"kairos-pix__amount\">\n    <span class=\"kairos-pix__amount-label\">${labels.amountLabel}</span>\n    <span class=\"kairos-pix__amount-value\">${formattedAmount}</span>\n  </div>\n\n  <div class=\"kairos-pix__qr-wrapper\">\n    <img data-kairos-pix-qr\n         alt=\"QR Code PIX\"\n         width=\"${qrSize}\" height=\"${qrSize}\"\n         style=\"display:none; border-radius: 8px;\" />\n    <div data-kairos-pix-qr-placeholder class=\"kairos-pix__qr-placeholder\"\n         style=\"width:${qrSize}px; height:${qrSize}px;\">\n      <svg width=\"48\" height=\"48\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n        <rect x=\"3\" y=\"3\" width=\"7\" height=\"7\" rx=\"1\"/><rect x=\"14\" y=\"3\" width=\"7\" height=\"7\" rx=\"1\"/>\n        <rect x=\"3\" y=\"14\" width=\"7\" height=\"7\" rx=\"1\"/><rect x=\"14\" y=\"14\" width=\"7\" height=\"7\" rx=\"1\"/>\n      </svg>\n    </div>\n\n    <div data-kairos-pix-expired class=\"kairos-pix__expired-overlay\" style=\"display:none;\">\n      <span>${labels.expired}</span>\n    </div>\n  </div>\n\n  ${hasExpiry ? `\n  <div data-kairos-pix-expiry-row class=\"kairos-pix__status\">\n    <span class=\"kairos-pix__pulse\"></span>\n    <span class=\"kairos-pix__waiting\">${labels.waiting}</span>\n    <span class=\"kairos-pix__timer\">${labels.expiresIn} <span data-kairos-pix-countdown>--:--</span></span>\n  </div>\n  ` : ''}\n\n  <button type=\"button\" data-kairos-pix-copy class=\"kairos-pix__copy-btn\">\n    <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n      <rect x=\"9\" y=\"9\" width=\"13\" height=\"13\" rx=\"2\" ry=\"2\"/><path d=\"M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1\"/>\n    </svg>\n    <span data-kairos-pix-copy-label>${labels.copyCode}</span>\n  </button>\n</div>`;\n}\n\nasync function resolveQrImage(config: PixQrCodeConfig, size: number): Promise<string | null> {\n  // 1. If base64 provided by PSP\n  const b64 = config.qrCodeBase64;\n  if (b64) {\n    if (b64.startsWith('data:')) return b64;\n    if (b64.startsWith('PHN2Zy')) return `data:image/svg+xml;base64,${b64}`;\n    if (!b64.startsWith('http')) return `data:image/png;base64,${b64}`;\n  }\n\n  // 2. Generate QR from copyPaste using Canvas (no external dependencies)\n  if (config.copyPaste) {\n    try {\n      return await generateQrDataUrl(config.copyPaste, size);\n    } catch {\n      return null;\n    }\n  }\n\n  return null;\n}\n\n// ---------------------------------------------------------------------------\n// Minimal QR Code generator (Canvas-based, no external deps)\n// Uses the QR code algorithm for alphanumeric/byte mode.\n// For simplicity, delegates to a well-tested inline implementation.\n// ---------------------------------------------------------------------------\n\n/**\n * Generate a QR code data URL using the Canvas API.\n * This is a lightweight implementation that encodes the payload as a QR code.\n */\nasync function generateQrDataUrl(text: string, size: number): Promise<string> {\n  // Use the qr-code matrix generator and render to canvas\n  const modules = generateQrMatrix(text);\n  const moduleCount = modules.length;\n  const cellSize = Math.floor(size / (moduleCount + 8)); // Add quiet zone\n  const offset = Math.floor((size - cellSize * moduleCount) / 2);\n\n  const canvas = document.createElement('canvas');\n  canvas.width = size;\n  canvas.height = size;\n  const ctx = canvas.getContext('2d')!;\n\n  // White background\n  ctx.fillStyle = '#FFFFFF';\n  ctx.fillRect(0, 0, size, size);\n\n  // Draw modules\n  ctx.fillStyle = '#000000';\n  for (let row = 0; row < moduleCount; row++) {\n    for (let col = 0; col < moduleCount; col++) {\n      if (modules[row][col]) {\n        ctx.fillRect(offset + col * cellSize, offset + row * cellSize, cellSize, cellSize);\n      }\n    }\n  }\n\n  return canvas.toDataURL('image/png');\n}\n\n// ---------------------------------------------------------------------------\n// QR Code Matrix Generator\n// Encodes data in byte mode, error correction level M.\n// Based on ISO/IEC 18004 and QR code specification.\n// ---------------------------------------------------------------------------\n\nfunction generateQrMatrix(data: string): boolean[][] {\n  const bytes = new TextEncoder().encode(data);\n  const version = selectVersion(bytes.length);\n  const size = version * 4 + 17;\n\n  // Create module grid\n  const grid: (boolean | null)[][] = Array.from({ length: size }, () => Array(size).fill(null));\n  const reserved: boolean[][] = Array.from({ length: size }, () => Array(size).fill(false));\n\n  // Place finder patterns\n  placeFinder(grid, reserved, 0, 0);\n  placeFinder(grid, reserved, size - 7, 0);\n  placeFinder(grid, reserved, 0, size - 7);\n\n  // Place alignment patterns\n  const alignPos = getAlignmentPositions(version);\n  for (const r of alignPos) {\n    for (const c of alignPos) {\n      if (reserved[r]?.[c]) continue;\n      placeAlignment(grid, reserved, r, c);\n    }\n  }\n\n  // Place timing patterns\n  for (let i = 8; i < size - 8; i++) {\n    if (!reserved[6][i]) {\n      grid[6][i] = i % 2 === 0;\n      reserved[6][i] = true;\n    }\n    if (!reserved[i][6]) {\n      grid[i][6] = i % 2 === 0;\n      reserved[i][6] = true;\n    }\n  }\n\n  // Dark module\n  grid[size - 8][8] = true;\n  reserved[size - 8][8] = true;\n\n  // Reserve format info areas\n  for (let i = 0; i < 8; i++) {\n    reserved[8][i] = true;\n    reserved[8][size - 1 - i] = true;\n    reserved[i][8] = true;\n    reserved[size - 1 - i][8] = true;\n  }\n  reserved[8][8] = true;\n\n  // Reserve version info areas (version >= 7)\n  if (version >= 7) {\n    for (let i = 0; i < 6; i++) {\n      for (let j = 0; j < 3; j++) {\n        reserved[i][size - 11 + j] = true;\n        reserved[size - 11 + j][i] = true;\n      }\n    }\n  }\n\n  // Encode data\n  const ecLevel = 0; // M level\n  const codewords = encodeData(bytes, version, ecLevel);\n\n  // Place data bits\n  placeData(grid, reserved, codewords, size);\n\n  // Apply best mask\n  const bestMask = selectBestMask(grid, reserved, size);\n  applyMask(grid, reserved, bestMask, size);\n\n  // Place format info\n  placeFormatInfo(grid, ecLevel, bestMask, size);\n\n  // Place version info\n  if (version >= 7) {\n    placeVersionInfo(grid, version, size);\n  }\n\n  // Convert to boolean matrix\n  return grid.map(row => row.map(cell => cell === true));\n}\n\nfunction selectVersion(dataLen: number): number {\n  // Byte mode capacity for EC level M\n  const capacities = [\n    0, 14, 26, 42, 62, 84, 106, 122, 152, 180, 213,\n    251, 287, 331, 362, 412, 450, 504, 560, 624, 666,\n    711, 779, 857, 911, 997, 1059, 1125, 1190, 1264, 1370,\n    1452, 1538, 1628, 1722, 1809, 1911, 1989, 2099, 2213, 2331,\n  ];\n  for (let v = 1; v <= 40; v++) {\n    if (capacities[v] >= dataLen) return v;\n  }\n  throw new Error('PixQrCode: data too long for QR code');\n}\n\nfunction getAlignmentPositions(version: number): number[] {\n  if (version <= 1) return [];\n  const positions: number[][] = [\n    [], [],\n    [6, 18], [6, 22], [6, 26], [6, 30], [6, 34],\n    [6, 22, 38], [6, 24, 42], [6, 26, 46], [6, 28, 50], [6, 30, 54],\n    [6, 32, 58], [6, 34, 62], [6, 26, 46, 66], [6, 26, 48, 70],\n    [6, 26, 50, 74], [6, 30, 54, 78], [6, 30, 56, 82], [6, 30, 58, 86],\n    [6, 34, 62, 90], [6, 28, 50, 72, 94], [6, 26, 50, 74, 98],\n    [6, 30, 54, 78, 102], [6, 28, 54, 80, 106], [6, 32, 58, 84, 110],\n    [6, 30, 58, 86, 114], [6, 34, 62, 90, 118], [6, 26, 50, 74, 98, 122],\n    [6, 30, 54, 78, 102, 126], [6, 26, 52, 78, 104, 130],\n    [6, 30, 56, 82, 108, 134], [6, 34, 60, 86, 112, 138],\n    [6, 30, 58, 86, 114, 142], [6, 34, 62, 90, 118, 146],\n    [6, 30, 54, 78, 102, 126, 150], [6, 24, 50, 76, 102, 128, 154],\n    [6, 28, 54, 80, 106, 132, 158], [6, 32, 58, 84, 110, 136, 162],\n    [6, 26, 54, 82, 110, 138, 166], [6, 30, 58, 86, 114, 142, 170],\n  ];\n  return positions[version] || [];\n}\n\nfunction placeFinder(grid: (boolean | null)[][], reserved: boolean[][], row: number, col: number) {\n  for (let r = -1; r <= 7; r++) {\n    for (let c = -1; c <= 7; c++) {\n      const gr = row + r;\n      const gc = col + c;\n      if (gr < 0 || gc < 0 || gr >= grid.length || gc >= grid.length) continue;\n      const inOuter = r === 0 || r === 6 || c === 0 || c === 6;\n      const inInner = r >= 2 && r <= 4 && c >= 2 && c <= 4;\n      grid[gr][gc] = (r >= 0 && r <= 6 && c >= 0 && c <= 6) && (inOuter || inInner);\n      reserved[gr][gc] = true;\n    }\n  }\n}\n\nfunction placeAlignment(grid: (boolean | null)[][], reserved: boolean[][], row: number, col: number) {\n  for (let r = -2; r <= 2; r++) {\n    for (let c = -2; c <= 2; c++) {\n      const gr = row + r;\n      const gc = col + c;\n      if (gr < 0 || gc < 0 || gr >= grid.length || gc >= grid.length) continue;\n      if (reserved[gr][gc]) return; // Overlap with finder\n    }\n  }\n  for (let r = -2; r <= 2; r++) {\n    for (let c = -2; c <= 2; c++) {\n      const gr = row + r;\n      const gc = col + c;\n      const isEdge = Math.abs(r) === 2 || Math.abs(c) === 2;\n      const isCenter = r === 0 && c === 0;\n      grid[gr][gc] = isEdge || isCenter;\n      reserved[gr][gc] = true;\n    }\n  }\n}\n\n// Reed-Solomon & data encoding\nfunction encodeData(data: Uint8Array, version: number, _ecLevel: number): number[] {\n  const totalCodewords = getTotalCodewords(version);\n  const ecCodewords = getEcCodewordsPerBlock(version);\n  const numBlocks = getNumBlocks(version);\n  const dataCodewords = totalCodewords - ecCodewords * numBlocks;\n\n  // Build data stream: mode(4) + count(8 or 16) + data + terminator + padding\n  const bits: number[] = [];\n\n  // Mode indicator: byte mode = 0100\n  pushBits(bits, 0b0100, 4);\n\n  // Character count indicator\n  const countBits = version <= 9 ? 8 : 16;\n  pushBits(bits, data.length, countBits);\n\n  // Data\n  for (const byte of data) {\n    pushBits(bits, byte, 8);\n  }\n\n  // Terminator\n  const dataBits = dataCodewords * 8;\n  const terminatorLen = Math.min(4, dataBits - bits.length);\n  pushBits(bits, 0, terminatorLen);\n\n  // Pad to byte boundary\n  while (bits.length % 8 !== 0) bits.push(0);\n\n  // Pad codewords\n  const padWords = [0xEC, 0x11];\n  let padIdx = 0;\n  while (bits.length < dataBits) {\n    pushBits(bits, padWords[padIdx % 2], 8);\n    padIdx++;\n  }\n\n  // Convert to bytes\n  const dataBytes: number[] = [];\n  for (let i = 0; i < bits.length; i += 8) {\n    let byte = 0;\n    for (let j = 0; j < 8; j++) {\n      byte = (byte << 1) | (bits[i + j] || 0);\n    }\n    dataBytes.push(byte);\n  }\n\n  // Split into blocks and generate EC\n  const blocksData: number[][] = [];\n  const blocksEc: number[][] = [];\n  const shortBlockLen = Math.floor(dataCodewords / numBlocks);\n  const longBlocks = dataCodewords % numBlocks;\n  let offset = 0;\n\n  for (let b = 0; b < numBlocks; b++) {\n    const blockLen = shortBlockLen + (b >= numBlocks - longBlocks ? 1 : 0);\n    const block = dataBytes.slice(offset, offset + blockLen);\n    blocksData.push(block);\n    blocksEc.push(reedSolomonEncode(block, ecCodewords));\n    offset += blockLen;\n  }\n\n  // Interleave data codewords\n  const result: number[] = [];\n  const maxDataLen = Math.max(...blocksData.map(b => b.length));\n  for (let i = 0; i < maxDataLen; i++) {\n    for (const block of blocksData) {\n      if (i < block.length) result.push(block[i]);\n    }\n  }\n\n  // Interleave EC codewords\n  for (let i = 0; i < ecCodewords; i++) {\n    for (const block of blocksEc) {\n      if (i < block.length) result.push(block[i]);\n    }\n  }\n\n  return result;\n}\n\nfunction pushBits(arr: number[], value: number, numBits: number) {\n  for (let i = numBits - 1; i >= 0; i--) {\n    arr.push((value >> i) & 1);\n  }\n}\n\n// GF(256) arithmetic for Reed-Solomon\nconst GF_EXP = new Uint8Array(512);\nconst GF_LOG = new Uint8Array(256);\n\n(function initGaloisField() {\n  let x = 1;\n  for (let i = 0; i < 255; i++) {\n    GF_EXP[i] = x;\n    GF_LOG[x] = i;\n    x = x << 1;\n    if (x >= 256) x ^= 0x11D;\n  }\n  for (let i = 255; i < 512; i++) {\n    GF_EXP[i] = GF_EXP[i - 255];\n  }\n})();\n\nfunction gfMul(a: number, b: number): number {\n  if (a === 0 || b === 0) return 0;\n  return GF_EXP[GF_LOG[a] + GF_LOG[b]];\n}\n\nfunction reedSolomonEncode(data: number[], ecLen: number): number[] {\n  // Build generator polynomial\n  let gen = [1];\n  for (let i = 0; i < ecLen; i++) {\n    const newGen = new Array(gen.length + 1).fill(0);\n    for (let j = 0; j < gen.length; j++) {\n      newGen[j] ^= gen[j];\n      newGen[j + 1] ^= gfMul(gen[j], GF_EXP[i]);\n    }\n    gen = newGen;\n  }\n\n  const msg = new Array(data.length + ecLen).fill(0);\n  for (let i = 0; i < data.length; i++) msg[i] = data[i];\n\n  for (let i = 0; i < data.length; i++) {\n    const coeff = msg[i];\n    if (coeff !== 0) {\n      for (let j = 0; j < gen.length; j++) {\n        msg[i + j] ^= gfMul(gen[j], coeff);\n      }\n    }\n  }\n\n  return msg.slice(data.length);\n}\n\nfunction placeData(grid: (boolean | null)[][], reserved: boolean[][], codewords: number[], size: number) {\n  let bitIdx = 0;\n  const totalBits = codewords.length * 8;\n\n  // Traverse columns right-to-left in pairs, skipping column 6\n  let col = size - 1;\n  while (col >= 0) {\n    if (col === 6) col--;\n\n    for (let row = 0; row < size; row++) {\n      for (let c = 0; c < 2; c++) {\n        const actualCol = col - c;\n        if (actualCol < 0) continue;\n\n        // Determine direction: upward for even pair index, downward for odd\n        const pairIndex = Math.floor((size - 1 - col + (col < 6 ? 1 : 0)) / 2);\n        const isUpward = pairIndex % 2 === 0;\n        const actualRow = isUpward ? size - 1 - row : row;\n\n        if (reserved[actualRow][actualCol]) continue;\n\n        if (bitIdx < totalBits) {\n          const byteIdx = Math.floor(bitIdx / 8);\n          const bitOff = 7 - (bitIdx % 8);\n          grid[actualRow][actualCol] = ((codewords[byteIdx] >> bitOff) & 1) === 1;\n          bitIdx++;\n        } else {\n          grid[actualRow][actualCol] = false;\n        }\n      }\n    }\n    col -= 2;\n  }\n}\n\nfunction applyMask(grid: (boolean | null)[][], reserved: boolean[][], mask: number, size: number) {\n  for (let r = 0; r < size; r++) {\n    for (let c = 0; c < size; c++) {\n      if (reserved[r][c]) continue;\n      if (shouldMask(mask, r, c)) {\n        grid[r][c] = !grid[r][c];\n      }\n    }\n  }\n}\n\nfunction shouldMask(mask: number, row: number, col: number): boolean {\n  switch (mask) {\n    case 0: return (row + col) % 2 === 0;\n    case 1: return row % 2 === 0;\n    case 2: return col % 3 === 0;\n    case 3: return (row + col) % 3 === 0;\n    case 4: return (Math.floor(row / 2) + Math.floor(col / 3)) % 2 === 0;\n    case 5: return (row * col) % 2 + (row * col) % 3 === 0;\n    case 6: return ((row * col) % 2 + (row * col) % 3) % 2 === 0;\n    case 7: return ((row + col) % 2 + (row * col) % 3) % 2 === 0;\n    default: return false;\n  }\n}\n\nfunction selectBestMask(grid: (boolean | null)[][], reserved: boolean[][], size: number): number {\n  // Simplified: use mask 0 (the spec says to pick the lowest penalty, but\n  // a full penalty calculator is complex; mask 0 works well for most data)\n  // For production use, evaluate all 8 masks and pick the one with lowest penalty.\n  let bestMask = 0;\n  let bestPenalty = Infinity;\n\n  for (let m = 0; m < 8; m++) {\n    // Clone grid\n    const test = grid.map(r => [...r]);\n    for (let r = 0; r < size; r++) {\n      for (let c = 0; c < size; c++) {\n        if (!reserved[r][c] && shouldMask(m, r, c)) {\n          test[r][c] = !test[r][c];\n        }\n      }\n    }\n    const penalty = calcPenalty(test, size);\n    if (penalty < bestPenalty) {\n      bestPenalty = penalty;\n      bestMask = m;\n    }\n  }\n  return bestMask;\n}\n\nfunction calcPenalty(grid: (boolean | null)[][], size: number): number {\n  let penalty = 0;\n\n  // Rule 1: Adjacent same-color modules in rows/cols\n  for (let r = 0; r < size; r++) {\n    let count = 1;\n    for (let c = 1; c < size; c++) {\n      if (grid[r][c] === grid[r][c - 1]) {\n        count++;\n        if (count === 5) penalty += 3;\n        else if (count > 5) penalty += 1;\n      } else {\n        count = 1;\n      }\n    }\n  }\n  for (let c = 0; c < size; c++) {\n    let count = 1;\n    for (let r = 1; r < size; r++) {\n      if (grid[r][c] === grid[r - 1][c]) {\n        count++;\n        if (count === 5) penalty += 3;\n        else if (count > 5) penalty += 1;\n      } else {\n        count = 1;\n      }\n    }\n  }\n\n  // Rule 3: 1:1:3:1:1 finder-like pattern (simplified check)\n  // Rule 4: Proportion of dark modules\n  let dark = 0;\n  for (let r = 0; r < size; r++) {\n    for (let c = 0; c < size; c++) {\n      if (grid[r][c]) dark++;\n    }\n  }\n  const total = size * size;\n  const pct = (dark / total) * 100;\n  penalty += Math.floor(Math.abs(pct - 50) / 5) * 10;\n\n  return penalty;\n}\n\n// Format info encoding (EC level M = 00, masks 0-7)\nconst FORMAT_INFO = [\n  0x5412, 0x5125, 0x5E7C, 0x5B4B, 0x45F9, 0x40CE, 0x4F97, 0x4AA0,\n];\n\nfunction placeFormatInfo(grid: (boolean | null)[][], ecLevel: number, mask: number, size: number) {\n  const info = FORMAT_INFO[mask];\n\n  // Horizontal strip\n  const hBits = [\n    [0, 8], [1, 8], [2, 8], [3, 8], [4, 8], [5, 8], [7, 8], [8, 8],\n    [8, 7], [8, 5], [8, 4], [8, 3], [8, 2], [8, 1], [8, 0],\n  ];\n  for (let i = 0; i < 15; i++) {\n    grid[hBits[i][0]][hBits[i][1]] = ((info >> (14 - i)) & 1) === 1;\n  }\n\n  // Vertical strip\n  const vBits = [\n    [8, size - 1], [8, size - 2], [8, size - 3], [8, size - 4],\n    [8, size - 5], [8, size - 6], [8, size - 7], [8, size - 8],\n    [size - 7, 8], [size - 6, 8], [size - 5, 8], [size - 4, 8],\n    [size - 3, 8], [size - 2, 8], [size - 1, 8],\n  ];\n  for (let i = 0; i < 15; i++) {\n    grid[vBits[i][0]][vBits[i][1]] = ((info >> (14 - i)) & 1) === 1;\n  }\n}\n\nfunction placeVersionInfo(grid: (boolean | null)[][], version: number, size: number) {\n  if (version < 7) return;\n\n  // Version info is an 18-bit sequence with BCH error correction\n  const versionInfo = getVersionInfo(version);\n\n  for (let i = 0; i < 18; i++) {\n    const bit = ((versionInfo >> i) & 1) === 1;\n    const row = Math.floor(i / 3);\n    const col = size - 11 + (i % 3);\n    grid[row][col] = bit;\n    grid[col][row] = bit;\n  }\n}\n\nfunction getVersionInfo(version: number): number {\n  // BCH(18,6) encoding for version info\n  let d = version << 12;\n  const gen = 0x1F25; // Generator polynomial\n  let rem = d;\n  for (let i = 5; i >= 0; i--) {\n    if (rem & (1 << (i + 12))) {\n      rem ^= gen << i;\n    }\n  }\n  return d | rem;\n}\n\n// QR version tables for EC level M\nfunction getTotalCodewords(version: number): number {\n  const table = [\n    0, 26, 44, 70, 100, 134, 172, 196, 242, 292, 346,\n    404, 466, 532, 581, 655, 733, 815, 901, 991, 1085,\n    1156, 1258, 1364, 1474, 1588, 1706, 1828, 1921, 2051, 2185,\n    2323, 2465, 2611, 2761, 2876, 3034, 3196, 3362, 3532, 3706,\n  ];\n  return table[version] || 26;\n}\n\nfunction getEcCodewordsPerBlock(version: number): number {\n  const table = [\n    0, 10, 16, 26, 18, 24, 16, 18, 22, 22, 26,\n    30, 22, 22, 24, 24, 28, 28, 26, 26, 26,\n    26, 28, 28, 28, 28, 28, 28, 28, 28, 28,\n    28, 28, 28, 28, 28, 28, 28, 28, 28, 28,\n  ];\n  return table[version] || 10;\n}\n\nfunction getNumBlocks(version: number): number {\n  const table = [\n    0, 1, 1, 1, 2, 2, 4, 4, 4, 5, 5,\n    5, 8, 9, 9, 10, 10, 11, 13, 14, 16,\n    17, 17, 18, 20, 21, 23, 25, 26, 28, 29,\n    31, 33, 35, 37, 38, 40, 43, 45, 47, 49,\n  ];\n  return table[version] || 1;\n}\n\n// ---------------------------------------------------------------------------\n// CSS injection (idempotent — only injected once)\n// ---------------------------------------------------------------------------\n\nlet stylesInjected = false;\n\nfunction injectStyles() {\n  if (stylesInjected) return;\n  stylesInjected = true;\n\n  const style = document.createElement('style');\n  style.textContent = `\n.kairos-pix {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 16px;\n  font-family: var(--kairos-font, inherit);\n  color: var(--kairos-text, inherit);\n}\n\n.kairos-pix__amount {\n  text-align: center;\n}\n\n.kairos-pix__amount-label {\n  display: block;\n  font-size: 0.875rem;\n  opacity: 0.7;\n}\n\n.kairos-pix__amount-value {\n  display: block;\n  font-size: 2rem;\n  font-weight: 700;\n  margin-top: 2px;\n}\n\n.kairos-pix__qr-wrapper {\n  position: relative;\n  padding: 16px;\n  background: #fff;\n  border-radius: 16px;\n  box-shadow: 0 2px 12px rgba(0,0,0,0.08);\n}\n\n.kairos-pix__qr-placeholder {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: #f5f5f5;\n  border-radius: 8px;\n  color: #bbb;\n}\n\n.kairos-pix__expired-overlay {\n  position: absolute;\n  inset: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: rgba(255,255,255,0.9);\n  border-radius: 16px;\n  font-size: 0.875rem;\n  font-weight: 600;\n  color: var(--kairos-error, #dc2626);\n}\n\n.kairos-pix__status {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 6px;\n}\n\n.kairos-pix__pulse {\n  display: inline-block;\n  width: 8px;\n  height: 8px;\n  border-radius: 50%;\n  background: var(--kairos-primary, #2563eb);\n  animation: kairos-pix-pulse 1.5s ease-in-out infinite;\n}\n\n@keyframes kairos-pix-pulse {\n  0%, 100% { opacity: 1; transform: scale(1); }\n  50% { opacity: 0.5; transform: scale(1.3); }\n}\n\n.kairos-pix__waiting {\n  font-size: 0.875rem;\n  font-weight: 500;\n  color: var(--kairos-primary, #2563eb);\n}\n\n.kairos-pix__timer {\n  font-size: 0.75rem;\n  opacity: 0.6;\n}\n\n.kairos-pix__copy-btn {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  width: 100%;\n  max-width: 320px;\n  padding: 12px 24px;\n  font-size: 0.9375rem;\n  font-weight: 500;\n  font-family: inherit;\n  border: 1px solid var(--kairos-border, #e2e8f0);\n  border-radius: var(--kairos-radius, 8px);\n  background: var(--kairos-bg, #fff);\n  color: var(--kairos-text, #1a1a1a);\n  cursor: pointer;\n  transition: background 0.15s, border-color 0.15s;\n}\n\n.kairos-pix__copy-btn:hover {\n  background: var(--kairos-bg-hover, #f8fafc);\n  border-color: var(--kairos-border-hover, #cbd5e1);\n}\n\n.kairos-pix__copy-btn:active {\n  transform: scale(0.98);\n}\n`;\n  document.head.appendChild(style);\n}\n","/**\n * PaymentPoller - Polls a status endpoint until a terminal status is reached.\n *\n * The SDK doesn't call Kairos API directly (it has no auth tokens).\n * Instead, the integrator provides a `fetchStatus` function that calls their\n * own backend, which in turn proxies to the Kairos transaction status API.\n *\n * @example\n * ```typescript\n * import { PaymentPoller } from '@kairos/payments-js';\n *\n * const poller = new PaymentPoller({\n *   fetchStatus: async () => {\n *     const res = await fetch(`/api/payments/status/${transactionId}`);\n *     return res.json(); // { status: 'CONFIRMED', ... }\n *   },\n *   onStatusChange: (status, data) => {\n *     if (status === 'CONFIRMED') showSuccess();\n *   },\n *   intervalMs: 3000,\n *   timeoutMs: 300000, // 5 minutes\n * });\n *\n * poller.start();\n * // later: poller.stop();\n * ```\n */\n\nexport type PaymentStatus =\n  | 'PENDING'\n  | 'PROCESSING'\n  | 'AUTHORIZED'\n  | 'CONFIRMED'\n  | 'FAILED'\n  | 'CANCELLED'\n  | 'EXPIRED'\n  | 'REFUNDED'\n  | 'CHARGEBACK';\n\nconst TERMINAL_STATUSES: Set<string> = new Set([\n  'CONFIRMED',\n  'FAILED',\n  'CANCELLED',\n  'EXPIRED',\n  'REFUNDED',\n  'CHARGEBACK',\n]);\n\nexport interface PaymentStatusResponse {\n  status: string;\n  [key: string]: unknown;\n}\n\nexport interface PaymentPollerConfig {\n  /** Function that fetches the current payment status from your backend */\n  fetchStatus: () => Promise<PaymentStatusResponse>;\n\n  /** Called when status changes (including the first poll) */\n  onStatusChange?: (status: string, data: PaymentStatusResponse) => void;\n\n  /** Called when a terminal status is reached (CONFIRMED, FAILED, etc.) */\n  onComplete?: (status: string, data: PaymentStatusResponse) => void;\n\n  /** Called on fetch errors */\n  onError?: (error: unknown) => void;\n\n  /** Polling interval in milliseconds (default: 3000) */\n  intervalMs?: number;\n\n  /** Maximum polling duration in milliseconds (default: 300000 = 5 min) */\n  timeoutMs?: number;\n}\n\nexport class PaymentPoller {\n  private config: Required<PaymentPollerConfig>;\n  private timer: ReturnType<typeof setInterval> | null = null;\n  private timeoutTimer: ReturnType<typeof setTimeout> | null = null;\n  private lastStatus: string | null = null;\n  private running = false;\n\n  constructor(config: PaymentPollerConfig) {\n    this.config = {\n      fetchStatus: config.fetchStatus,\n      onStatusChange: config.onStatusChange || (() => {}),\n      onComplete: config.onComplete || (() => {}),\n      onError: config.onError || (() => {}),\n      intervalMs: config.intervalMs ?? 3000,\n      timeoutMs: config.timeoutMs ?? 300_000,\n    };\n  }\n\n  /** Start polling. Safe to call multiple times (no-op if already running). */\n  start(): void {\n    if (this.running) return;\n    this.running = true;\n    this.lastStatus = null;\n\n    // First poll immediately\n    this.poll();\n\n    // Then poll at interval\n    this.timer = setInterval(() => this.poll(), this.config.intervalMs);\n\n    // Auto-stop after timeout\n    this.timeoutTimer = setTimeout(() => {\n      this.stop();\n      this.config.onStatusChange('EXPIRED', { status: 'EXPIRED', reason: 'polling_timeout' });\n      this.config.onComplete('EXPIRED', { status: 'EXPIRED', reason: 'polling_timeout' });\n    }, this.config.timeoutMs);\n  }\n\n  /** Stop polling and clean up timers. */\n  stop(): void {\n    this.running = false;\n    if (this.timer) {\n      clearInterval(this.timer);\n      this.timer = null;\n    }\n    if (this.timeoutTimer) {\n      clearTimeout(this.timeoutTimer);\n      this.timeoutTimer = null;\n    }\n  }\n\n  /** Whether the poller is currently active. */\n  get isRunning(): boolean {\n    return this.running;\n  }\n\n  private async poll(): Promise<void> {\n    if (!this.running) return;\n\n    try {\n      const data = await this.config.fetchStatus();\n      const status = data.status?.toUpperCase() || 'PENDING';\n\n      if (status !== this.lastStatus) {\n        this.lastStatus = status;\n        this.config.onStatusChange(status, data);\n      }\n\n      if (TERMINAL_STATUSES.has(status)) {\n        this.stop();\n        this.config.onComplete(status, data);\n      }\n    } catch (error) {\n      this.config.onError(error);\n    }\n  }\n}\n","/**\n * Kairos Payments JavaScript SDK\n *\n * A unified SDK for card tokenization and payments across multiple PSPs.\n *\n * @example\n * ```typescript\n * import { KairosPayments } from '@kairos/payments-js';\n *\n * const kairos = await KairosPayments.init({\n *   tenantId: 'faithlink',\n *   environment: 'production'\n * });\n *\n * await kairos.createCardPayment('#container', {\n *   amount: 100.00,\n *   onSubmit: async (data) => {\n *     // Send data.token to your backend\n *   }\n * });\n * ```\n */\n\nexport { KairosPayments } from './core/KairosPayments';\nexport { CardPaymentForm } from './components/CardPaymentForm';\nexport { KairosEncryptedAdapter } from './adapters/KairosEncryptedAdapter';\n\n// PIX QR Code display with copy-paste\nexport { createPixQrCode } from './components/PixQrCode';\nexport type { PixQrCodeConfig, PixQrCodeInstance } from './components/PixQrCode';\n\n// Payment status polling\nexport { PaymentPoller } from './core/PaymentPoller';\nexport type { PaymentPollerConfig, PaymentStatusResponse, PaymentStatus } from './core/PaymentPoller';\n\n// Encryption utilities\nexport { encryptCardData, isEncryptionAvailable, clearEncryptionCache } from './crypto/encryption';\nexport type { CardDataToEncrypt } from './crypto/encryption';\n\n// Types\nexport type {\n  KairosConfig,\n  CardPaymentConfig,\n  PaymentData,\n  InstallmentOption,\n  TokenizationOptions,\n  PspAdapter\n} from './types';\n\n// Version\nexport const VERSION = '0.2.0';\n"],"names":["_jsxs","_jsx"],"mappings":";;;AAcA;;;;;AAKG;MACU,kBAAkB,CAAA;AAA/B,IAAA,WAAA,GAAA;QACW,IAAA,CAAA,QAAQ,GAAG,aAAa;QAEzB,IAAA,CAAA,EAAE,GAAQ,IAAI;QACd,IAAA,CAAA,aAAa,GAAQ,IAAI;QACzB,IAAA,CAAA,gBAAgB,GAAQ,IAAI;QAC5B,IAAA,CAAA,SAAS,GAAW,EAAE;IAiJhC;AA/IE;;AAEG;AACK,IAAA,MAAM,UAAU,GAAA;AACtB,QAAA,IAAI,MAAM,CAAC,WAAW,EAAE;YACtB;QACF;QAEA,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM,KAAI;YACrC,MAAM,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC;AAC/C,YAAA,MAAM,CAAC,GAAG,GAAG,mCAAmC;AAChD,YAAA,MAAM,CAAC,KAAK,GAAG,IAAI;YACnB,MAAM,CAAC,MAAM,GAAG,MAAM,OAAO,EAAE;AAC/B,YAAA,MAAM,CAAC,OAAO,GAAG,MAAM,MAAM,CAAC,IAAI,KAAK,CAAC,gCAAgC,CAAC,CAAC;AAC1E,YAAA,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;AACnC,QAAA,CAAC,CAAC;IACJ;AAEA,IAAA,MAAM,IAAI,CAAC,SAAiB,EAAE,OAAiC,EAAA;AAC7D,QAAA,IAAI,CAAC,SAAS,GAAG,SAAS;AAE1B,QAAA,MAAM,IAAI,CAAC,UAAU,EAAE;QAEvB,IAAI,CAAC,EAAE,GAAG,IAAI,MAAM,CAAC,WAAW,CAAC,SAAS,EAAE;AAC1C,YAAA,MAAM,EAAE,OAAO,EAAE,MAAM,IAAI;AAC5B,SAAA,CAAC;QAEF,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,EAAE,CAAC,MAAM,EAAE;IACvC;AAEA,IAAA,MAAM,iBAAiB,CACrB,SAA+B,EAC/B,MAAyB,EAAA;AAEzB,QAAA,MAAM,WAAW,GAAG,OAAO,SAAS,KAAK;cACrC,SAAS,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE;AAC3B,cAAE,SAAS,CAAC,EAAE;;AAGhB,QAAA,IAAI,IAAI,CAAC,gBAAgB,EAAE;AACzB,YAAA,MAAM,IAAI,CAAC,gBAAgB,CAAC,OAAO,EAAE;QACvC;AAEA,QAAA,MAAM,QAAQ,GAAG;AACf,YAAA,cAAc,EAAE;gBACd,MAAM,EAAE,MAAM,CAAC,MAAM;AACrB,gBAAA,KAAK,EAAE;AACL,oBAAA,KAAK,EAAE;AACR;AACF,aAAA;AACD,YAAA,aAAa,EAAE;AACb,gBAAA,MAAM,EAAE;AACN,oBAAA,KAAK,EAAE;AACL,wBAAA,eAAe,EAAE;AACf,4BAAA,mBAAmB,EAAE,MAAM,CAAC,MAAM,EAAE,YAAY,IAAI,SAAS;AAC7D,4BAAA,SAAS,EAAE,MAAM,CAAC,MAAM,EAAE,YAAY,IAAI;AAC3C;AACF;AACF,iBAAA;AACD,gBAAA,cAAc,EAAE;AACd,oBAAA,eAAe,EAAE,MAAM,CAAC,eAAe,IAAI;AAC5C;AACF,aAAA;AACD,YAAA,SAAS,EAAE;gBACT,OAAO,EAAE,MAAK;AACZ,oBAAA,MAAM,CAAC,OAAO,IAAI;gBACpB,CAAC;AACD,gBAAA,QAAQ,EAAE,OAAO,YAAiB,KAAI;AACpC,oBAAA,MAAM,WAAW,GAAgB;wBAC/B,KAAK,EAAE,YAAY,CAAC,KAAK;wBACzB,YAAY,EAAE,YAAY,CAAC,YAAY;wBACvC,eAAe,EAAE,YAAY,CAAC,iBAAiB;wBAC/C,QAAQ,EAAE,YAAY,CAAC,SAAS;AAChC,wBAAA,cAAc,EAAE,YAAY,CAAC,gBAAgB,IAAI,EAAE;AACnD,wBAAA,cAAc,EAAE,YAAY,CAAC,UAAU,EAAE,IAAI,IAAI,EAAE;wBACnD,QAAQ,EAAE,IAAI,CAAC;qBAChB;AAED,oBAAA,MAAM,MAAM,CAAC,QAAQ,CAAC,WAAW,CAAC;gBACpC,CAAC;AACD,gBAAA,OAAO,EAAE,CAAC,KAAU,KAAI;oBACtB,MAAM,CAAC,OAAO,GAAG;AACf,wBAAA,IAAI,EAAE,KAAK,CAAC,IAAI,IAAI,SAAS;AAC7B,wBAAA,OAAO,EAAE,KAAK,CAAC,OAAO,IAAI,mBAAmB;AAC7C,wBAAA,KAAK,EAAE;AACR,qBAAA,CAAC;gBACJ;AACD;SACF;AAED,QAAA,IAAI,CAAC,gBAAgB,GAAG,MAAM,IAAI,CAAC,aAAa,CAAC,MAAM,CACrD,aAAa,EACb,WAAW,EACX,QAAQ,CACT;QAED,OAAO;AACL,YAAA,YAAY,EAAE,CAAC,MAAc,KAAI;;;AAG/B,gBAAA,OAAO,CAAC,IAAI,CAAC,2DAA2D,CAAC;YAC3E,CAAC;YACD,MAAM,EAAE,YAAW;;AAEjB,gBAAA,MAAM,IAAI,KAAK,CAAC,6BAA6B,CAAC;YAChD,CAAC;YACD,OAAO,EAAE,MAAK;AACZ,gBAAA,IAAI,CAAC,gBAAgB,EAAE,OAAO,EAAE;AAChC,gBAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI;YAC9B;SACD;IACH;AAEA,IAAA,MAAM,eAAe,CAAC,MAAc,EAAE,GAAW,EAAA;QAC/C,MAAM,QAAQ,GAAG,MAAM,IAAI,CAAC,EAAE,CAAC,eAAe,CAAC;AAC7C,YAAA,MAAM,EAAE,MAAM,CAAC,MAAM,CAAC;AACtB,YAAA,GAAG,EAAE;AACN,SAAA,CAAC;QAEF,IAAI,CAAC,QAAQ,IAAI,QAAQ,CAAC,MAAM,KAAK,CAAC,EAAE;AACtC,YAAA,OAAO,EAAE;QACX;QAEA,MAAM,UAAU,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,WAAW,IAAI,EAAE;QAEhD,OAAO,UAAU,CAAC,GAAG,CAAC,CAAC,IAAS,EAAE,KAAa,MAAM;YACnD,YAAY,EAAE,IAAI,CAAC,YAAY;YAC/B,iBAAiB,EAAE,IAAI,CAAC,kBAAkB;YAC1C,WAAW,EAAE,IAAI,CAAC,YAAY;AAC9B,YAAA,YAAY,EAAE,IAAI,CAAC,gBAAgB,KAAK,CAAC;YACzC,YAAY,EAAE,IAAI,CAAC,gBAAgB;YACnC,WAAW,EAAE,KAAK,KAAK;AACxB,SAAA,CAAC,CAAC;IACL;IAEA,OAAO,GAAA;AACL,QAAA,IAAI,IAAI,CAAC,gBAAgB,EAAE;AACzB,YAAA,IAAI,CAAC,gBAAgB,CAAC,OAAO,EAAE;AAC/B,YAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI;QAC9B;AACA,QAAA,IAAI,CAAC,EAAE,GAAG,IAAI;AACd,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI;IAC3B;AACD;;AC7JD;;;;AAIG;MACU,gBAAgB,CAAA;AAA7B,IAAA,WAAA,GAAA;QACW,IAAA,CAAA,QAAQ,GAAG,WAAW;QAEvB,IAAA,CAAA,SAAS,GAAW,EAAE;QACtB,IAAA,CAAA,WAAW,GAAW,SAAS;IAkNzC;AAhNE;;AAEG;AACK,IAAA,MAAM,UAAU,GAAA;AACtB,QAAA,IAAI,MAAM,CAAC,SAAS,EAAE;YACpB;QACF;AAEA,QAAA,MAAM,SAAS,GAAG,IAAI,CAAC,WAAW,KAAK;AACrC,cAAE;cACA,+FAA+F;QAEnG,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM,KAAI;YACrC,MAAM,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC;AAC/C,YAAA,MAAM,CAAC,GAAG,GAAG,SAAS;AACtB,YAAA,MAAM,CAAC,KAAK,GAAG,IAAI;YACnB,MAAM,CAAC,MAAM,GAAG,MAAM,OAAO,EAAE;AAC/B,YAAA,MAAM,CAAC,OAAO,GAAG,MAAM,MAAM,CAAC,IAAI,KAAK,CAAC,8BAA8B,CAAC,CAAC;AACxE,YAAA,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;AACnC,QAAA,CAAC,CAAC;IACJ;AAEA,IAAA,MAAM,IAAI,CAAC,SAAiB,EAAE,OAAiC,EAAA;AAC7D,QAAA,IAAI,CAAC,SAAS,GAAG,SAAS;QAC1B,IAAI,CAAC,WAAW,GAAI,OAAO,EAAE,WAAsB,IAAI,SAAS;AAEhE,QAAA,MAAM,IAAI,CAAC,UAAU,EAAE;;;IAIzB;AAEA,IAAA,MAAM,iBAAiB,CACrB,SAA+B,EAC/B,MAAyB,EAAA;AAEzB,QAAA,MAAM,WAAW,GAAG,OAAO,SAAS,KAAK;AACvC,cAAE,QAAQ,CAAC,aAAa,CAAC,SAAS;cAChC,SAAS;QAEb,IAAI,CAAC,WAAW,EAAE;AAChB,YAAA,MAAM,IAAI,KAAK,CAAC,wBAAwB,SAAS,CAAA,CAAE,CAAC;QACtD;;;QAIA,MAAM,QAAQ,GAAG,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC;AAC5C,QAAA,WAAW,CAAC,SAAS,GAAG,QAAQ;QAEhC,MAAM,IAAI,GAAG,WAAW,CAAC,aAAa,CAAC,MAAM,CAAoB;QAEjE,IAAI,CAAC,gBAAgB,CAAC,QAAQ,EAAE,OAAO,CAAC,KAAI;YAC1C,CAAC,CAAC,cAAc,EAAE;AAElB,YAAA,IAAI;AACF,gBAAA,MAAM,QAAQ,GAAG,IAAI,QAAQ,CAAC,IAAI,CAAC;gBACnC,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;AAE/C,gBAAA,MAAM,WAAW,GAAgB;oBAC/B,KAAK;oBACL,YAAY,EAAE,QAAQ,CAAC,QAAQ,CAAC,GAAG,CAAC,cAAc,CAAW,CAAC,IAAI,CAAC;AACnE,oBAAA,eAAe,EAAE,aAAa;AAC9B,oBAAA,QAAQ,EAAE,EAAE;AACZ,oBAAA,cAAc,EAAG,QAAQ,CAAC,GAAG,CAAC,YAAY,CAAY,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE;oBACvE,cAAc,EAAE,QAAQ,CAAC,GAAG,CAAC,gBAAgB,CAAW,IAAI,EAAE;oBAC9D,QAAQ,EAAE,IAAI,CAAC;iBAChB;AAED,gBAAA,MAAM,MAAM,CAAC,QAAQ,CAAC,WAAW,CAAC;YACpC;YAAE,OAAO,KAAU,EAAE;gBACnB,MAAM,CAAC,OAAO,GAAG;AACf,oBAAA,IAAI,EAAE,oBAAoB;AAC1B,oBAAA,OAAO,EAAE,KAAK,CAAC,OAAO,IAAI,yBAAyB;AACnD,oBAAA,KAAK,EAAE;AACR,iBAAA,CAAC;YACJ;AACF,QAAA,CAAC,CAAC;AAEF,QAAA,MAAM,CAAC,OAAO,IAAI;QAElB,OAAO;AACL,YAAA,YAAY,EAAE,CAAC,MAAc,KAAI;gBAC/B,MAAM,QAAQ,GAAG,IAAI,CAAC,aAAa,CAAC,eAAe,CAAC;gBACpD,IAAI,QAAQ,EAAE;oBACZ,QAAQ,CAAC,WAAW,GAAG,CAAA,GAAA,EAAM,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAA,CAAE;gBAClD;YACF,CAAC;YACD,MAAM,EAAE,YAAW;gBACjB,IAAI,CAAC,aAAa,CAAC,IAAI,KAAK,CAAC,QAAQ,CAAC,CAAC;gBACvC,OAAO,EAAiB,CAAC;YAC3B,CAAC;YACD,OAAO,EAAE,MAAK;AACZ,gBAAA,WAAW,CAAC,SAAS,GAAG,EAAE;YAC5B;SACD;IACH;AAEQ,IAAA,cAAc,CAAC,MAAyB,EAAA;QAC9C,OAAO;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BD,QAAA,EAAA,MAAM,CAAC,gBAAgB,KAAK,KAAK,GAAG;;;;AAIL,uCAAA,EAAA,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAA;;;SAGxD,GAAG,EAAE;;;AAGyB,qCAAA,EAAA,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAA;;;KAG1D;IACH;IAEQ,MAAM,YAAY,CAAC,QAAkB,EAAA;;;AAG3C,QAAA,MAAM,UAAU,GAAI,QAAQ,CAAC,GAAG,CAAC,YAAY,CAAY,EAAE,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC;AAC7E,QAAA,MAAM,CAAC,QAAQ,EAAE,OAAO,CAAC,GAAI,QAAQ,CAAC,GAAG,CAAC,QAAQ,CAAY,EAAE,KAAK,CAAC,GAAG,CAAC,IAAI,EAAE;QAChF,MAAM,GAAG,GAAG,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAW;QACzC,MAAM,cAAc,GAAG,QAAQ,CAAC,GAAG,CAAC,gBAAgB,CAAW;;AAG/D,QAAA,MAAM,QAAQ,GAAG,MAAM,KAAK,CAAC,4CAA4C,EAAE;AACzE,YAAA,MAAM,EAAE,MAAM;AACd,YAAA,OAAO,EAAE;AACP,gBAAA,cAAc,EAAE,kBAAkB;gBAClC,eAAe,EAAE,IAAI,CAAC;AACvB,aAAA;AACD,YAAA,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC;AACnB,gBAAA,IAAI,EAAE;AACJ,oBAAA,MAAM,EAAE,UAAU;AAClB,oBAAA,SAAS,EAAE,QAAQ;oBACnB,QAAQ,EAAE,CAAA,EAAA,EAAK,OAAO,CAAA,CAAE;AACxB,oBAAA,aAAa,EAAE,GAAG;AAClB,oBAAA,MAAM,EAAE;AACN,wBAAA,IAAI,EAAE;AACP;AACF;aACF;AACF,SAAA,CAAC;AAEF,QAAA,IAAI,CAAC,QAAQ,CAAC,EAAE,EAAE;AAChB,YAAA,MAAM,IAAI,KAAK,CAAC,wCAAwC,CAAC;QAC3D;AAEA,QAAA,MAAM,IAAI,GAAG,MAAM,QAAQ,CAAC,IAAI,EAAE;QAClC,OAAO,IAAI,CAAC,SAAS;IACvB;AAEA,IAAA,MAAM,eAAe,CAAC,MAAc,EAAE,GAAW,EAAA;;;QAG/C,MAAM,eAAe,GAAG,EAAE;QAC1B,MAAM,OAAO,GAAwB,EAAE;AAEvC,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,eAAe,EAAE,CAAC,EAAE,EAAE;AACzC,YAAA,MAAM,YAAY,GAAG,CAAC,IAAI,CAAC;AAC3B,YAAA,MAAM,IAAI,GAAG,YAAY,GAAG,CAAC,GAAG,MAAM,CAAC;YACvC,MAAM,WAAW,GAAG,YAAY,GAAG,MAAM,GAAG,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,EAAE,CAAC,CAAC;AAC1E,YAAA,MAAM,iBAAiB,GAAG,WAAW,GAAG,CAAC;AAEzC,YAAA,IAAI,iBAAiB,IAAI,CAAC,EAAE;gBAC1B,OAAO,CAAC,IAAI,CAAC;AACX,oBAAA,YAAY,EAAE,CAAC;oBACf,iBAAiB,EAAE,IAAI,CAAC,KAAK,CAAC,iBAAiB,GAAG,GAAG,CAAC,GAAG,GAAG;oBAC5D,WAAW,EAAE,IAAI,CAAC,KAAK,CAAC,WAAW,GAAG,GAAG,CAAC,GAAG,GAAG;oBAChD,YAAY;oBACZ,YAAY,EAAE,YAAY,GAAG,CAAC,GAAG,IAAI,GAAG,GAAG;oBAC3C,WAAW,EAAE,CAAC,KAAK;AACpB,iBAAA,CAAC;YACJ;QACF;AAEA,QAAA,OAAO,OAAO;IAChB;IAEA,OAAO,GAAA;;IAEP;AACD;;ACzOD;;;;;;;;;;;;;;AAcG;AAUH;AACA,MAAM,QAAQ,GAAG,IAAI,GAAG,EAAiD;AACzE,MAAM,SAAS,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC;AAEtC;;;AAGG;AACH,eAAe,cAAc,CAAC,MAAc,EAAE,QAAgB,EAAE,UAAmB,EAAA;AACjF,IAAA,MAAM,QAAQ,GAAG,UAAU,IAAI,aAAa;AAC5C,IAAA,MAAM,GAAG,GAAG,IAAI,CAAC,GAAG,EAAE;IACtB,MAAM,MAAM,GAAG,QAAQ,CAAC,GAAG,CAAC,QAAQ,CAAC;IACrC,IAAI,MAAM,IAAI,GAAG,GAAG,MAAM,CAAC,SAAS,GAAG,SAAS,EAAE;QAChD,OAAO,MAAM,CAAC,GAAG;IACnB;AAEA,IAAA,MAAM,MAAM,GAAG,UAAU,GAAG,CAAA,YAAA,EAAe,UAAU,CAAA,CAAE,GAAG,EAAE;AAC5D,IAAA,MAAM,GAAG,GAAG,MAAM,KAAK,CACrB,CAAA,EAAG,MAAM,CAAA,qBAAA,EAAwB,QAAQ,CAAA,eAAA,EAAkB,MAAM,CAAA,CAAE,CACpE;AACD,IAAA,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE;QACX,MAAM,IAAI,KAAK,CAAC,CAAA,gCAAA,EAAmC,GAAG,CAAC,MAAM,CAAA,CAAE,CAAC;IAClE;AAEA,IAAA,MAAM,IAAI,GAAG,MAAM,GAAG,CAAC,IAAI,EAAE;AAC7B,IAAA,MAAM,eAAe,GAAW,IAAI,CAAC,SAAS;;AAG9C,IAAA,MAAM,YAAY,GAAG,IAAI,CAAC,eAAe,CAAC;IAC1C,MAAM,KAAK,GAAG,IAAI,UAAU,CAAC,YAAY,CAAC,MAAM,CAAC;AACjD,IAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,YAAY,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;QAC5C,KAAK,CAAC,CAAC,CAAC,GAAG,YAAY,CAAC,UAAU,CAAC,CAAC,CAAC;IACvC;;AAGA,IAAA,MAAM,SAAS,GAAG,MAAM,MAAM,CAAC,MAAM,CAAC,SAAS,CAC7C,MAAM,EACN,KAAK,CAAC,MAAM,EACZ,EAAE,IAAI,EAAE,UAAU,EAAE,IAAI,EAAE,SAAS,EAAE,EACrC,KAAK,EACL,CAAC,SAAS,CAAC,CACZ;AACD,IAAA,QAAQ,CAAC,GAAG,CAAC,QAAQ,EAAE,EAAE,GAAG,EAAE,SAAS,EAAE,SAAS,EAAE,GAAG,EAAE,CAAC;AAE1D,IAAA,OAAO,SAAS;AAClB;AAEA;;;;;;;;AAQG;AACI,eAAe,eAAe,CACnC,QAA2B,EAC3B,MAAc,EACd,QAAgB,EAChB,UAAmB,EAAA;IAEnB,MAAM,MAAM,GAAG,MAAM,cAAc,CAAC,MAAM,EAAE,QAAQ,EAAE,UAAU,CAAC;;AAGjE,IAAA,MAAM,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC;QAC9B,CAAC,EAAE,QAAQ,CAAC,MAAM;QAClB,CAAC,EAAE,QAAQ,CAAC,UAAU;QACtB,CAAC,EAAE,QAAQ,CAAC,eAAe;QAC3B,CAAC,EAAE,QAAQ,CAAC,cAAc;QAC1B,CAAC,EAAE,QAAQ,CAAC,GAAG;AAChB,KAAA,CAAC;AAEF,IAAA,MAAM,OAAO,GAAG,IAAI,WAAW,EAAE;IACjC,MAAM,SAAS,GAAG,OAAO,CAAC,MAAM,CAAC,QAAQ,CAAC;;IAG1C,MAAM,MAAM,GAAG,MAAM,MAAM,CAAC,MAAM,CAAC,WAAW,CAC5C,EAAE,IAAI,EAAE,SAAS,EAAE,MAAM,EAAE,GAAG,EAAE,EAChC,IAAI;IACJ,CAAC,SAAS,CAAC,CACZ;;AAGD,IAAA,MAAM,EAAE,GAAG,MAAM,CAAC,eAAe,CAAC,IAAI,UAAU,CAAC,EAAE,CAAC,CAAC;;IAGrD,MAAM,UAAU,GAAG,MAAM,MAAM,CAAC,MAAM,CAAC,OAAO,CAC5C,EAAE,IAAI,EAAE,SAAS,EAAE,EAAE,EAAE,SAAS,EAAE,GAAG,EAAE,EACvC,MAAM,EACN,SAAS,CACV;;IAGD,MAAM,UAAU,GAAG,MAAM,MAAM,CAAC,MAAM,CAAC,OAAO,CAC5C,KAAK,EACL,MAAM,EACN,MAAM,EACN,EAAE,IAAI,EAAE,UAAU,EAAE,CACrB;;AAGD,IAAA,MAAM,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC;AAC9B,QAAA,EAAE,EAAE,mBAAmB,CAAC,UAAU,CAAC;QACnC,EAAE,EAAE,mBAAmB,CAAC,EAAE,CAAC,MAAM,CAAC;AAClC,QAAA,CAAC,EAAE,mBAAmB,CAAC,UAAU,CAAC;AACnC,KAAA,CAAC;AAEF,IAAA,OAAO,IAAI,CAAC,QAAQ,CAAC;AACvB;AAEA;;AAEG;AACI,eAAe,qBAAqB,CAAC,MAAc,EAAE,QAAgB,EAAE,UAAmB,EAAA;AAC/F,IAAA,IAAI;QACF,MAAM,cAAc,CAAC,MAAM,EAAE,QAAQ,EAAE,UAAU,CAAC;AAClD,QAAA,OAAO,IAAI;IACb;AAAE,IAAA,MAAM;AACN,QAAA,OAAO,KAAK;IACd;AACF;AAEA;;AAEG;AACG,SAAU,oBAAoB,CAAC,UAAmB,EAAA;IACtD,IAAI,UAAU,EAAE;AACd,QAAA,QAAQ,CAAC,MAAM,CAAC,UAAU,CAAC;IAC7B;SAAO;QACL,QAAQ,CAAC,KAAK,EAAE;IAClB;AACF;AAEA,SAAS,mBAAmB,CAAC,MAAmB,EAAA;AAC9C,IAAA,MAAM,KAAK,GAAG,IAAI,UAAU,CAAC,MAAM,CAAC;IACpC,IAAI,MAAM,GAAG,EAAE;AACf,IAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;QACrC,MAAM,IAAI,MAAM,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;IACzC;AACA,IAAA,OAAO,IAAI,CAAC,MAAM,CAAC;AACrB;;AC5JA;;;;;;;;;;;;;;AAcG;MACU,sBAAsB,CAAA;AAAnC,IAAA,WAAA,GAAA;QACW,IAAA,CAAA,QAAQ,GAAG,QAAQ;QAEpB,IAAA,CAAA,MAAM,GAAW,EAAE;QACnB,IAAA,CAAA,QAAQ,GAAW,EAAE;QACrB,IAAA,CAAA,UAAU,GAAW,EAAE;IAmfjC;AAjfE,IAAA,MAAM,IAAI,CAAC,UAAkB,EAAE,OAAiC,EAAA;QAC9D,IAAI,CAAC,MAAM,GAAI,OAAO,EAAE,MAAiB,IAAI,4BAA4B;QACzE,IAAI,CAAC,QAAQ,GAAI,OAAO,EAAE,QAAmB,IAAI,EAAE;QACnD,IAAI,CAAC,UAAU,GAAI,OAAO,EAAE,UAAqB,IAAI,EAAE;IACzD;AAEA,IAAA,MAAM,iBAAiB,CACrB,SAA+B,EAC/B,MAAyB,EAAA;AAEzB,QAAA,MAAM,WAAW,GAAG,OAAO,SAAS,KAAK;AACvC,cAAE,QAAQ,CAAC,aAAa,CAAC,SAAS;cAChC,SAAS;QAEb,IAAI,CAAC,WAAW,EAAE;AAChB,YAAA,MAAM,IAAI,KAAK,CAAC,wBAAwB,SAAS,CAAA,CAAE,CAAC;QACtD;;QAGA,WAAW,CAAC,SAAS,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC;QAElD,MAAM,IAAI,GAAG,WAAW,CAAC,aAAa,CAAC,wBAAwB,CAAoB;QACnF,MAAM,OAAO,GAAG,WAAW,CAAC,aAAa,CAAC,yBAAyB,CAAgB;QACnF,MAAM,SAAS,GAAG,WAAW,CAAC,aAAa,CAAC,0BAA0B,CAAsB;QAC5F,MAAM,eAAe,GAAG,WAAW,CAAC,aAAa,CAAC,+BAA+B,CAAqB;QACtG,MAAM,WAAW,GAAG,WAAW,CAAC,aAAa,CAAC,0BAA0B,CAAqB;QAC7F,MAAM,QAAQ,GAAG,WAAW,CAAC,aAAa,CAAC,uBAAuB,CAAqB;QACvF,MAAM,SAAS,GAAG,WAAW,CAAC,aAAa,CAAC,wBAAwB,CAAqB;QACzF,MAAM,kBAAkB,GAAG,WAAW,CAAC,aAAa,CAAC,gCAAgC,CAAsB;QAC3G,MAAM,UAAU,GAAG,WAAW,CAAC,aAAa,CAAC,yBAAyB,CAAgB;;AAGtF,QAAA,eAAe,CAAC,gBAAgB,CAAC,OAAO,EAAE,MAAK;AAC7C,YAAA,MAAM,MAAM,GAAG,eAAe,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC;YACpE,eAAe,CAAC,KAAK,GAAG,MAAM,CAAC,OAAO,CAAC,gBAAgB,EAAE,KAAK,CAAC;;AAE/D,YAAA,MAAM,KAAK,GAAG,eAAe,CAAC,MAAM,CAAC;YACrC,IAAI,UAAU,EAAE;AACd,gBAAA,UAAU,CAAC,WAAW,GAAG,KAAK,GAAG,KAAK,CAAC,WAAW,EAAE,GAAG,EAAE;AACzD,gBAAA,UAAU,CAAC,KAAK,CAAC,OAAO,GAAG,KAAK,GAAG,OAAO,GAAG,MAAM;YACrD;AACF,QAAA,CAAC,CAAC;;AAGF,QAAA,WAAW,CAAC,gBAAgB,CAAC,OAAO,EAAE,MAAK;AACzC,YAAA,MAAM,MAAM,GAAG,WAAW,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;AAC/D,YAAA,IAAI,MAAM,CAAC,MAAM,IAAI,CAAC,EAAE;gBACtB,WAAW,CAAC,KAAK,GAAG,CAAA,EAAG,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA,CAAA,EAAI,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE;YAChE;iBAAO;AACL,gBAAA,WAAW,CAAC,KAAK,GAAG,MAAM;YAC5B;AACF,QAAA,CAAC,CAAC;;AAGF,QAAA,QAAQ,CAAC,gBAAgB,CAAC,OAAO,EAAE,MAAK;YACtC,QAAQ,CAAC,KAAK,GAAG,QAAQ,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;AAChE,QAAA,CAAC,CAAC;;AAGF,QAAA,SAAS,CAAC,gBAAgB,CAAC,OAAO,EAAE,MAAK;YACvC,SAAS,CAAC,KAAK,GAAG,SAAS,CAAC,KAAK,CAAC,WAAW,EAAE;AACjD,QAAA,CAAC,CAAC;;QAGF,IAAI,kBAAkB,EAAE;AACtB,YAAA,MAAM,YAAY,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,MAAM,EAAE,EAAE,CAAC;YAClE,MAAM,OAAO,GAAG,YAAY,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,YAAY,KAAK,MAAM,CAAC,eAAe,IAAI,EAAE,CAAC,CAAC;YAC1F,kBAAkB,CAAC,SAAS,GAAG,OAAO,CAAC,GAAG,CAAC,GAAG,IAAG;AAC/C,gBAAA,MAAM,SAAS,GAAG,GAAG,CAAC,iBAAiB,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,GAAG,EAAE,GAAG,CAAC;AACpE,gBAAA,MAAM,MAAM,GAAG,GAAG,CAAC;AACjB,sBAAE;AACF,sBAAE,CAAA,YAAA,EAAe,GAAG,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,GAAG,EAAE,GAAG,CAAC,GAAG;AAClE,gBAAA,OAAO,CAAA,eAAA,EAAkB,GAAG,CAAC,YAAY,CAAA,EAAA,EAAK,GAAG,CAAC,YAAY,CAAA,QAAA,EAAW,SAAS,CAAA,EAAG,MAAM,WAAW;AACxG,YAAA,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC;QACb;;QAGA,IAAI,CAAC,gBAAgB,CAAC,QAAQ,EAAE,OAAO,CAAC,KAAI;YAC1C,CAAC,CAAC,cAAc,EAAE;YAClB,IAAI,SAAS,CAAC,QAAQ;gBAAE;;YAGxB,MAAM,eAAe,GAAG,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,KAAK,EAAE,WAAW,CAAC,KAAK,EAAE,QAAQ,CAAC,KAAK,EAAE,SAAS,CAAC,KAAK,CAAC;YAChH,IAAI,eAAe,EAAE;AACnB,gBAAA,OAAO,CAAC,WAAW,GAAG,eAAe;AACrC,gBAAA,OAAO,CAAC,KAAK,CAAC,OAAO,GAAG,OAAO;AAC/B,gBAAA,MAAM,CAAC,OAAO,GAAG,EAAE,IAAI,EAAE,kBAAkB,EAAE,OAAO,EAAE,eAAe,EAAE,CAAC;gBACxE;YACF;AAEA,YAAA,OAAO,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM;AAC9B,YAAA,SAAS,CAAC,QAAQ,GAAG,IAAI;AACzB,YAAA,MAAM,YAAY,GAAG,SAAS,CAAC,SAAS;AACxC,YAAA,SAAS,CAAC,SAAS,GAAG,IAAI,CAAC,oBAAoB,EAAE;AAEjD,YAAA,IAAI;AACF,gBAAA,MAAM,WAAW,GAAG,eAAe,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC;AAC5D,gBAAA,MAAM,CAAC,EAAE,EAAE,EAAE,CAAC,GAAG,WAAW,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC;AAC7C,gBAAA,MAAM,cAAc,GAAG,CAAC,IAAI,GAAG,QAAQ,CAAC,EAAE,IAAI,GAAG,EAAE,EAAE,CAAC,EAAE,QAAQ,EAAE;;AAGlE,gBAAA,MAAM,SAAS,GAAG,MAAM,eAAe,CACrC;AACE,oBAAA,MAAM,EAAE,WAAW;AACnB,oBAAA,UAAU,EAAE,SAAS,CAAC,KAAK,CAAC,IAAI,EAAE;AAClC,oBAAA,eAAe,EAAE,EAAE;oBACnB,cAAc;oBACd,GAAG,EAAE,QAAQ,CAAC,KAAK;AACpB,iBAAA,EACD,IAAI,CAAC,MAAM,EACX,IAAI,CAAC,QAAQ,EACb,IAAI,CAAC,UAAU,CAChB;AAED,gBAAA,MAAM,WAAW,GAAgB;AAC/B,oBAAA,KAAK,EAAE,EAAE;AACT,oBAAA,aAAa,EAAE,SAAS;AACxB,oBAAA,YAAY,EAAE,kBAAkB,GAAG,QAAQ,CAAC,kBAAkB,CAAC,KAAK,CAAC,GAAG,CAAC;AACzE,oBAAA,eAAe,EAAE,eAAe,CAAC,WAAW,CAAC,IAAI,SAAS;AAC1D,oBAAA,QAAQ,EAAE,EAAE;AACZ,oBAAA,cAAc,EAAE,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;AACrC,oBAAA,cAAc,EAAE,SAAS,CAAC,KAAK,CAAC,IAAI,EAAE;oBACtC,QAAQ,EAAE,IAAI,CAAC,QAAQ;iBACxB;AAED,gBAAA,MAAM,MAAM,CAAC,QAAQ,CAAC,WAAW,CAAC;YACpC;YAAE,OAAO,GAAQ,EAAE;gBACjB,OAAO,CAAC,WAAW,GAAG,GAAG,CAAC,OAAO,IAAI,6BAA6B;AAClE,gBAAA,OAAO,CAAC,KAAK,CAAC,OAAO,GAAG,OAAO;gBAC/B,MAAM,CAAC,OAAO,GAAG;AACf,oBAAA,IAAI,EAAE,kBAAkB;AACxB,oBAAA,OAAO,EAAE,GAAG,CAAC,OAAO,IAAI,6BAA6B;AACrD,oBAAA,KAAK,EAAE,GAAG;AACX,iBAAA,CAAC;YACJ;oBAAU;AACR,gBAAA,SAAS,CAAC,QAAQ,GAAG,KAAK;AAC1B,gBAAA,SAAS,CAAC,SAAS,GAAG,YAAY;YACpC;AACF,QAAA,CAAC,CAAC;AAEF,QAAA,MAAM,CAAC,OAAO,IAAI;QAElB,OAAO;AACL,YAAA,YAAY,EAAE,CAAC,MAAc,KAAI;gBAC/B,MAAM,QAAQ,GAAG,WAAW,CAAC,aAAa,CAAC,0BAA0B,CAAC;gBACtE,IAAI,QAAQ,EAAE;AACZ,oBAAA,QAAQ,CAAC,WAAW,GAAG,MAAM,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,GAAG,EAAE,GAAG,CAAC,EAAE;gBACpE;YACF,CAAC;YACD,MAAM,EAAE,YAAW;AACjB,gBAAA,IAAI,CAAC,aAAa,CAAC,IAAI,KAAK,CAAC,QAAQ,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,EAAE,IAAI,EAAE,CAAC,CAAC;AAC5E,gBAAA,OAAO,EAAiB;YAC1B,CAAC;YACD,OAAO,EAAE,MAAK;AACZ,gBAAA,WAAW,CAAC,SAAS,GAAG,EAAE;YAC5B,CAAC;SACF;IACH;AAEA,IAAA,MAAM,eAAe,CAAC,MAAc,EAAE,IAAY,EAAA;QAChD,MAAM,eAAe,GAAG,EAAE;QAC1B,MAAM,OAAO,GAAwB,EAAE;AAEvC,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,eAAe,EAAE,CAAC,EAAE,EAAE;AACzC,YAAA,MAAM,YAAY,GAAG,CAAC,IAAI,CAAC;YAC3B,MAAM,IAAI,GAAG,YAAY,GAAG,CAAC,GAAG,MAAM;YACtC,MAAM,WAAW,GAAG,YAAY,GAAG,MAAM,GAAG,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,EAAE,CAAC,CAAC;AAC1E,YAAA,MAAM,iBAAiB,GAAG,WAAW,GAAG,CAAC;AAEzC,YAAA,IAAI,iBAAiB,IAAI,CAAC,EAAE;gBAC1B,OAAO,CAAC,IAAI,CAAC;AACX,oBAAA,YAAY,EAAE,CAAC;oBACf,iBAAiB,EAAE,IAAI,CAAC,KAAK,CAAC,iBAAiB,GAAG,GAAG,CAAC,GAAG,GAAG;oBAC5D,WAAW,EAAE,IAAI,CAAC,KAAK,CAAC,WAAW,GAAG,GAAG,CAAC,GAAG,GAAG;oBAChD,YAAY;oBACZ,YAAY,EAAE,YAAY,GAAG,CAAC,GAAG,IAAI,GAAG,GAAG;oBAC3C,WAAW,EAAE,CAAC,KAAK,CAAC;AACrB,iBAAA,CAAC;YACJ;QACF;AAEA,QAAA,OAAO,OAAO;IAChB;IAEA,OAAO,GAAA;;IAEP;AAEQ,IAAA,QAAQ,CAAC,UAAkB,EAAE,MAAc,EAAE,GAAW,EAAE,IAAY,EAAA;QAC5E,MAAM,WAAW,GAAG,UAAU,CAAC,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC;AACjD,QAAA,IAAI,WAAW,CAAC,MAAM,GAAG,EAAE;AAAE,YAAA,OAAO,2BAA2B;AAC/D,QAAA,IAAI,MAAM,CAAC,MAAM,GAAG,CAAC;AAAE,YAAA,OAAO,2BAA2B;AAEzD,QAAA,MAAM,CAAC,EAAE,EAAE,EAAE,CAAC,GAAG,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC;QAClC,MAAM,KAAK,GAAG,QAAQ,CAAC,EAAE,EAAE,EAAE,CAAC;AAC9B,QAAA,IAAI,KAAK,GAAG,CAAC,IAAI,KAAK,GAAG,EAAE;AAAE,YAAA,OAAO,cAAc;AAElD,QAAA,MAAM,IAAI,GAAG,IAAI,GAAG,QAAQ,CAAC,EAAE,IAAI,GAAG,EAAE,EAAE,CAAC;AAC3C,QAAA,MAAM,GAAG,GAAG,IAAI,IAAI,EAAE;QACtB,IAAI,IAAI,GAAG,GAAG,CAAC,WAAW,EAAE,KAAK,IAAI,KAAK,GAAG,CAAC,WAAW,EAAE,IAAI,KAAK,GAAG,GAAG,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC,EAAE;AAC1F,YAAA,OAAO,iBAAiB;QAC1B;AAEA,QAAA,IAAI,GAAG,CAAC,MAAM,KAAK,CAAC;AAAE,YAAA,OAAO,cAAc;AAC3C,QAAA,IAAI,IAAI,CAAC,IAAI,EAAE,CAAC,MAAM,GAAG,CAAC;AAAE,YAAA,OAAO,eAAe;AAClD,QAAA,OAAO,IAAI;IACb;IAEQ,oBAAoB,GAAA;QAC1B,OAAO;;;;;;;;KAQN;IACH;AAEQ,IAAA,aAAa,CAAC,MAAyB,EAAA;AAC7C,QAAA,MAAM,eAAe,GAAG,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,GAAG,EAAE,GAAG,CAAC;;AAGlE,QAAA,MAAM,aAAa,GAAG,CAAA;;;;;;;;;;WAUf;QAEP,OAAO;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgOD,QAAA,EAAA,MAAM,CAAC,gBAAgB,KAAK,KAAK,GAAG;;;;yCAIL,eAAe,CAAA;;;SAG/C,GAAG,EAAE;;;;;;;;;;;;;;;;cAgBA,aAAa;;;;;;;;;wDAS6B,eAAe,CAAA;;;KAGlE;IACH;AACD;AAED;AACA,SAAS,eAAe,CAAC,MAAc,EAAA;IACrC,MAAM,KAAK,GAAG,MAAM,CAAC,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC;AACvC,IAAA,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC;AAAE,QAAA,OAAO,MAAM;AACnC,IAAA,IAAI,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC;AAAE,QAAA,OAAO,YAAY;AAC9C,IAAA,IAAI,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC;AAAE,QAAA,OAAO,MAAM;AACvC,IAAA,IAAI,uCAAuC,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,mBAAmB,CAAC,IAAI,CAAC,KAAK,CAAC;AAAE,QAAA,OAAO,KAAK;AACxG,IAAA,IAAI,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC;AAAE,QAAA,OAAO,WAAW;AAC7C,IAAA,OAAO,EAAE;AACX;;AC9gBA;;;;;;;;;;;;;;;AAeG;MACU,cAAc,CAAA;AAMzB,IAAA,WAAA,CAAoB,MAAoB,EAAA;QAJhC,IAAA,CAAA,OAAO,GAAyB,EAAE;QAClC,IAAA,CAAA,OAAO,GAAsB,IAAI;QACjC,IAAA,CAAA,YAAY,GAA+B,IAAI;QAGrD,IAAI,CAAC,MAAM,GAAG;YACZ,QAAQ,EAAE,MAAM,CAAC,QAAQ;AACzB,YAAA,UAAU,EAAE,MAAM,CAAC,UAAU,IAAI,EAAE;AACnC,YAAA,WAAW,EAAE,MAAM,CAAC,WAAW,IAAI,YAAY;AAC/C,YAAA,MAAM,EAAE,MAAM,CAAC,MAAM,IAAI,4BAA4B;AACrD,YAAA,iBAAiB,EAAE,MAAM,CAAC,iBAAiB,IAAI,SAAgB;AAC/D,YAAA,MAAM,EAAE,MAAM,CAAC,MAAM,IAAI,OAAO;AAChC,YAAA,KAAK,EAAE,MAAM,CAAC,KAAK,IAAI;SACxB;IACH;AAEA;;;AAGG;AACH,IAAA,aAAa,IAAI,CAAC,MAAoB,EAAA;AACpC,QAAA,MAAM,QAAQ,GAAG,IAAI,cAAc,CAAC,MAAM,CAAC;AAC3C,QAAA,MAAM,QAAQ,CAAC,YAAY,EAAE;AAC7B,QAAA,OAAO,QAAQ;IACjB;AAEA;;;AAGG;AACK,IAAA,MAAM,YAAY,GAAA;AACxB,QAAA,MAAM,GAAG,GAAG,CAAA,EAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAA,qBAAA,EAAwB,IAAI,CAAC,MAAM,CAAC,QAAQ,UAAU;AAEvF,QAAA,IAAI,CAAC,GAAG,CAAC,oCAAoC,EAAE,GAAG,CAAC;AAEnD,QAAA,IAAI;AACF,YAAA,MAAM,QAAQ,GAAG,MAAM,KAAK,CAAC,GAAG,CAAC;AAEjC,YAAA,IAAI,CAAC,QAAQ,CAAC,EAAE,EAAE;gBAChB,IAAI,CAAC,GAAG,CAAC,uCAAuC,EAAE,QAAQ,CAAC,MAAM,CAAC;AAClE,gBAAA,IAAI,CAAC,OAAO,GAAG,EAAE;gBACjB;YACF;AAEA,YAAA,MAAM,IAAI,GAAwB,MAAM,QAAQ,CAAC,IAAI,EAAE;YACvD,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,IAAI,EAAE;YAEjC,IAAI,CAAC,GAAG,CAAC,iBAAiB,EAAE,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,QAAQ,CAAC,CAAC;QAChE;QAAE,OAAO,GAAG,EAAE;;AAEZ,YAAA,IAAI,CAAC,GAAG,CAAC,kEAAkE,EAAE,GAAG,CAAC;AACjF,YAAA,IAAI,CAAC,OAAO,GAAG,EAAE;QACnB;IACF;AAEA;;;;;;;;AAQG;AACK,IAAA,MAAM,UAAU,GAAA;AACtB,QAAA,IAAI,IAAI,CAAC,OAAO,EAAE;YAChB,OAAO,IAAI,CAAC,OAAO;QACrB;;QAGA,IAAI,IAAI,CAAC,MAAM,CAAC,iBAAiB,KAAK,QAAQ,EAAE;AAC9C,YAAA,IAAI,CAAC,GAAG,CAAC,4CAA4C,CAAC;AACtD,YAAA,OAAO,IAAI,CAAC,iBAAiB,EAAE;QACjC;;QAGA,IAAI,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;AAE5B,QAAA,IAAI,IAAI,CAAC,MAAM,CAAC,iBAAiB,EAAE;YACjC,MAAM,SAAS,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CACjC,CAAC,IAAI,CAAC,CAAC,QAAQ,KAAK,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAClD;YACD,IAAI,SAAS,EAAE;gBACb,MAAM,GAAG,SAAS;YACpB;QACF;;QAGA,IAAI,CAAC,MAAM,EAAE;AACX,YAAA,IAAI,CAAC,GAAG,CAAC,mFAAmF,CAAC;AAC7F,YAAA,OAAO,IAAI,CAAC,iBAAiB,EAAE;QACjC;QAEA,IAAI,CAAC,GAAG,CAAC,YAAY,EAAE,MAAM,CAAC,QAAQ,CAAC;;AAGvC,QAAA,QAAQ,MAAM,CAAC,QAAQ;AACrB,YAAA,KAAK,aAAa;AAChB,gBAAA,IAAI,CAAC,OAAO,GAAG,IAAI,kBAAkB,EAAE;gBACvC;AACF,YAAA,KAAK,WAAW;AACd,gBAAA,IAAI,CAAC,OAAO,GAAG,IAAI,gBAAgB,EAAE;gBACrC;AACF,YAAA;;gBAEE,IAAI,CAAC,GAAG,CAAC,CAAA,sBAAA,EAAyB,MAAM,CAAC,QAAQ,CAAA,oCAAA,CAAsC,CAAC;AACxF,gBAAA,OAAO,IAAI,CAAC,iBAAiB,EAAE;;;QAInC,MAAM,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE;AACxC,YAAA,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,MAAM;YAC1B,WAAW,EAAE,MAAM,CAAC;AACrB,SAAA,CAAC;QAEF,OAAO,IAAI,CAAC,OAAO;IACrB;AAEA;;AAEG;AACK,IAAA,MAAM,iBAAiB,GAAA;AAC7B,QAAA,IAAI,CAAC,OAAO,GAAG,IAAI,sBAAsB,EAAE;AAC3C,QAAA,MAAM,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,EAAE;AAC1B,YAAA,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,MAAM;AAC1B,YAAA,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC,QAAQ;AAC9B,YAAA,UAAU,EAAE,IAAI,CAAC,MAAM,CAAC,UAAU;AAClC,YAAA,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,MAAM;AAC3B,SAAA,CAAC;QACF,OAAO,IAAI,CAAC,OAAO;IACrB;AAEA;;;;;;AAMG;AACH,IAAA,MAAM,iBAAiB,CACrB,SAA+B,EAC/B,MAAyB,EAAA;AAEzB,QAAA,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,UAAU,EAAE;QAEvC,IAAI,CAAC,GAAG,CAAC,yCAAyC,EAAE,MAAM,CAAC,MAAM,CAAC;AAElE,QAAA,IAAI,CAAC,YAAY,GAAG,MAAM,OAAO,CAAC,iBAAiB,CAAC,SAAS,EAAE,MAAM,CAAC;QACtE,OAAO,IAAI,CAAC,YAAY;IAC1B;AAEA;;;;;;AAMG;AACH,IAAA,MAAM,eAAe,CAAC,MAAc,EAAE,GAAW,EAAA;AAC/C,QAAA,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,UAAU,EAAE;QACvC,OAAO,OAAO,CAAC,eAAe,CAAC,MAAM,EAAE,GAAG,CAAC;IAC7C;AAEA;;AAEG;IACH,qBAAqB,GAAA;AACnB,QAAA,OAAO,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC;IAC1B;AAEA;;AAEG;IACH,SAAS,GAAA;AACP,QAAA,OAAO,EAAE,GAAG,IAAI,CAAC,MAAM,EAAE;IAC3B;AAEA;;AAEG;IACH,OAAO,GAAA;AACL,QAAA,IAAI,IAAI,CAAC,YAAY,EAAE;AACrB,YAAA,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE;AAC3B,YAAA,IAAI,CAAC,YAAY,GAAG,IAAI;QAC1B;AACA,QAAA,IAAI,IAAI,CAAC,OAAO,EAAE;AAChB,YAAA,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE;AACtB,YAAA,IAAI,CAAC,OAAO,GAAG,IAAI;QACrB;AACA,QAAA,IAAI,CAAC,OAAO,GAAG,EAAE;IACnB;IAEQ,GAAG,CAAC,GAAG,IAAe,EAAA;AAC5B,QAAA,IAAI,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE;YACrB,OAAO,CAAC,GAAG,CAAC,UAAU,EAAE,GAAG,IAAI,CAAC;QAClC;IACF;AACD;;ACzKK,SAAU,eAAe,CAAC,EAC9B,QAAQ,EACR,MAAM,EACN,WAAW,GAAG,YAAY,EAC1B,MAAM,EACN,iBAAiB,EACjB,eAAe,GAAG,EAAE,EACpB,SAAS,EACT,OAAO,EACP,OAAO,EACP,SAAS,EACT,KAAK,GAAG,KAAK,EACQ,EAAA;AACrB,IAAA,MAAM,YAAY,GAAG,MAAM,CAAiB,IAAI,CAAC;AACjD,IAAA,MAAM,SAAS,GAAG,MAAM,CAAwB,IAAI,CAAC;IACrD,MAAM,CAAC,OAAO,EAAE,UAAU,CAAC,GAAG,QAAQ,CAAC,IAAI,CAAC;IAC5C,MAAM,CAAC,KAAK,EAAE,QAAQ,CAAC,GAAG,QAAQ,CAAgB,IAAI,CAAC;IAEvD,SAAS,CAAC,MAAK;QACb,IAAI,OAAO,GAAG,IAAI;AAElB,QAAA,eAAe,UAAU,GAAA;YACvB,IAAI,CAAC,YAAY,CAAC,OAAO;gBAAE;AAE3B,YAAA,IAAI;gBACF,UAAU,CAAC,IAAI,CAAC;gBAChB,QAAQ,CAAC,IAAI,CAAC;AAEd,gBAAA,MAAM,MAAM,GAAiB;oBAC3B,QAAQ;oBACR,WAAW;oBACX,MAAM;oBACN,iBAAiB;oBACjB;iBACD;gBAED,MAAM,MAAM,GAAG,MAAM,cAAc,CAAC,IAAI,CAAC,MAAM,CAAC;gBAEhD,IAAI,CAAC,OAAO,EAAE;oBACZ,MAAM,CAAC,OAAO,EAAE;oBAChB;gBACF;AAEA,gBAAA,SAAS,CAAC,OAAO,GAAG,MAAM;AAE1B,gBAAA,MAAM,aAAa,GAAsB;oBACvC,MAAM;oBACN,eAAe;oBACf,OAAO,EAAE,MAAK;wBACZ,UAAU,CAAC,KAAK,CAAC;wBACjB,OAAO,IAAI;oBACb,CAAC;AACD,oBAAA,QAAQ,EAAE,OAAO,IAAI,KAAI;wBACvB,SAAS,CAAC,IAAI,CAAC;oBACjB,CAAC;AACD,oBAAA,OAAO,EAAE,CAAC,GAAG,KAAI;AACf,wBAAA,QAAQ,CAAC,GAAG,CAAC,OAAO,CAAC;AACrB,wBAAA,OAAO,GAAG,GAAG,CAAC;oBAChB;iBACD;gBAED,MAAM,MAAM,CAAC,iBAAiB,CAAC,YAAY,CAAC,OAAO,EAAE,aAAa,CAAC;YACrE;YAAE,OAAO,GAAQ,EAAE;gBACjB,IAAI,OAAO,EAAE;AACX,oBAAA,MAAM,YAAY,GAAG,GAAG,CAAC,OAAO,IAAI,mCAAmC;oBACvE,QAAQ,CAAC,YAAY,CAAC;oBACtB,UAAU,CAAC,KAAK,CAAC;AACjB,oBAAA,OAAO,GAAG;AACR,wBAAA,IAAI,EAAE,YAAY;AAClB,wBAAA,OAAO,EAAE,YAAY;AACrB,wBAAA,KAAK,EAAE;AACR,qBAAA,CAAC;gBACJ;YACF;QACF;AAEA,QAAA,UAAU,EAAE;AAEZ,QAAA,OAAO,MAAK;YACV,OAAO,GAAG,KAAK;AACf,YAAA,IAAI,SAAS,CAAC,OAAO,EAAE;AACrB,gBAAA,SAAS,CAAC,OAAO,CAAC,OAAO,EAAE;AAC3B,gBAAA,SAAS,CAAC,OAAO,GAAG,IAAI;YAC1B;AACF,QAAA,CAAC;AACH,IAAA,CAAC,EAAE,CAAC,QAAQ,EAAE,MAAM,EAAE,WAAW,EAAE,MAAM,EAAE,iBAAiB,CAAC,CAAC;IAE9D,QACEA,cAAK,SAAS,EAAE,SAAS,EAAA,QAAA,EAAA,CACtB,OAAO,KACNA,IAAA,CAAA,KAAA,EAAA,EAAK,SAAS,EAAC,gBAAgB,aAC7BC,GAAA,CAAA,KAAA,EAAA,EAAK,SAAS,EAAC,gBAAgB,EAAA,CAAG,EAClCA,GAAA,CAAA,MAAA,EAAA,EAAA,QAAA,EAAA,uCAAA,EAAA,CAAkD,CAAA,EAAA,CAC9C,CACP,EAEA,KAAK,KACJA,GAAA,CAAA,KAAA,EAAA,EAAK,SAAS,EAAC,cAAc,YAC3BA,GAAA,CAAA,MAAA,EAAA,EAAA,QAAA,EAAO,KAAK,GAAQ,EAAA,CAChB,CACP,EAEDA,GAAA,CAAA,KAAA,EAAA,EACE,GAAG,EAAE,YAAY,EACjB,EAAE,EAAC,+BAA+B,EAClC,KAAK,EAAE,EAAE,OAAO,EAAE,OAAO,GAAG,MAAM,GAAG,OAAO,EAAE,EAAA,CAC9C,EAED,CAAC,OAAO,IAAI,CAAC,KAAK,KACjBD,IAAA,CAAA,KAAA,EAAA,EAAK,SAAS,EAAC,iBAAiB,EAAC,KAAK,EAAE,cAAc,aACpDC,GAAA,CAAC,UAAU,KAAG,EACdA,GAAA,CAAA,MAAA,EAAA,EAAM,KAAK,EAAE,iBAAiB,kCAA0B,CAAA,EAAA,CACpD,CACP,CAAA,EAAA,CACG;AAEV;AAEA,MAAM,cAAc,GAAwB;AAC1C,IAAA,OAAO,EAAE,MAAM;AACf,IAAA,UAAU,EAAE,QAAQ;AACpB,IAAA,cAAc,EAAE,QAAQ;AACxB,IAAA,GAAG,EAAE,KAAK;AACV,IAAA,OAAO,EAAE,WAAW;AACpB,IAAA,OAAO,EAAE,GAAG;CACb;AAED,MAAM,iBAAiB,GAAwB;AAC7C,IAAA,QAAQ,EAAE,MAAM;AAChB,IAAA,UAAU,EAAE,mEAAmE;AAC/E,IAAA,KAAK,EAAE,SAAS;AAChB,IAAA,aAAa,EAAE,QAAQ;CACxB;AAED,SAAS,UAAU,GAAA;AACjB,IAAA,QACED,IAAA,CAAA,KAAA,EAAA,EAAK,KAAK,EAAC,IAAI,EAAC,MAAM,EAAC,IAAI,EAAC,OAAO,EAAC,WAAW,EAAC,IAAI,EAAC,MAAM,EAAC,KAAK,EAAC,4BAA4B,EAAA,QAAA,EAAA,CAC5FC,GAAA,CAAA,MAAA,EAAA,EAAA,QAAA,EACED,IAAA,CAAA,gBAAA,EAAA,EAAgB,EAAE,EAAC,kBAAkB,EAAC,EAAE,EAAC,IAAI,EAAC,EAAE,EAAC,IAAI,EAAC,EAAE,EAAC,MAAM,EAAC,EAAE,EAAC,MAAM,EAAA,QAAA,EAAA,CACvEC,GAAA,CAAA,MAAA,EAAA,EAAM,MAAM,EAAC,IAAI,EAAC,SAAS,EAAC,SAAS,EAAA,CAAE,EACvCA,GAAA,CAAA,MAAA,EAAA,EAAM,MAAM,EAAC,MAAM,EAAC,SAAS,EAAC,SAAS,EAAA,CAAE,CAAA,EAAA,CAC1B,EAAA,CACZ,EACPA,GAAA,CAAA,QAAA,EAAA,EAAQ,EAAE,EAAC,IAAI,EAAC,EAAE,EAAC,IAAI,EAAC,CAAC,EAAC,IAAI,EAAC,IAAI,EAAC,wBAAwB,EAAA,CAAE,EAC9DA,GAAA,CAAA,MAAA,EAAA,EAAM,CAAC,EAAC,2CAA2C,EAAC,MAAM,EAAC,OAAO,EAAC,WAAW,EAAC,GAAG,EAAC,aAAa,EAAC,OAAO,EAAC,cAAc,EAAC,OAAO,EAAA,CAAE,EACjIA,GAAA,CAAA,QAAA,EAAA,EAAQ,EAAE,EAAC,IAAI,EAAC,EAAE,EAAC,IAAI,EAAC,CAAC,EAAC,GAAG,EAAC,IAAI,EAAC,SAAS,EAAA,CAAE,CAAA,EAAA,CAC1C;AAEV;;AC/MA;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BG;AAoCG,SAAU,eAAe,CAC7B,SAA+B,EAC/B,MAAuB,EAAA;AAEvB,IAAA,MAAM,WAAW,GAAG,OAAO,SAAS,KAAK;AACvC,UAAE,QAAQ,CAAC,aAAa,CAAc,SAAS;UAC7C,SAAS;IAEb,IAAI,CAAC,WAAW,EAAE;AAChB,QAAA,MAAM,IAAI,KAAK,CAAC,mCAAmC,SAAS,CAAA,CAAE,CAAC;IACjE;AAEA,IAAA,MAAM,MAAM,GAAG,MAAM,CAAC,MAAM,IAAI,OAAO;AACvC,IAAA,MAAM,MAAM,GAAG,MAAM,CAAC,MAAM,IAAI,GAAG;AACnC,IAAA,MAAM,MAAM,GAAG,SAAS,CAAC,MAAM,CAAC;IAChC,IAAI,iBAAiB,GAA0C,IAAI;IACnE,IAAI,WAAW,GAAyC,IAAI;IAC5D,IAAI,OAAO,GAAG,KAAK;;IAGnB,WAAW,CAAC,SAAS,GAAG,SAAS,CAAC,MAAM,EAAE,MAAM,EAAE,MAAM,CAAC;;AAGzD,IAAA,YAAY,EAAE;;IAGd,MAAM,KAAK,GAAG,WAAW,CAAC,aAAa,CAAC,sBAAsB,CAA4B;IAC1F,MAAM,aAAa,GAAG,WAAW,CAAC,aAAa,CAAC,kCAAkC,CAAuB;IAEzG,cAAc,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,KAAI;AAC1C,QAAA,IAAI,KAAK,IAAI,GAAG,EAAE;AAChB,YAAA,KAAK,CAAC,GAAG,GAAG,GAAG;AACf,YAAA,KAAK,CAAC,KAAK,CAAC,OAAO,GAAG,OAAO;AAC7B,YAAA,IAAI,aAAa;AAAE,gBAAA,aAAa,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM;QACzD;AACF,IAAA,CAAC,CAAC;;IAGF,MAAM,OAAO,GAAG,WAAW,CAAC,aAAa,CAAC,wBAAwB,CAA6B;IAC/F,MAAM,SAAS,GAAG,WAAW,CAAC,aAAa,CAAC,8BAA8B,CAAuB;AAEjG,IAAA,MAAM,MAAM,GAAG,YAAW;AACxB,QAAA,IAAI,CAAC,MAAM,CAAC,SAAS,IAAI,OAAO;YAAE;AAClC,QAAA,IAAI;YACF,MAAM,SAAS,CAAC,SAAS,CAAC,SAAS,CAAC,MAAM,CAAC,SAAS,CAAC;YACrD,IAAI,SAAS,EAAE;AACb,gBAAA,SAAS,CAAC,WAAW,GAAG,MAAM,CAAC,MAAM;AACrC,gBAAA,IAAI,WAAW;oBAAE,YAAY,CAAC,WAAW,CAAC;AAC1C,gBAAA,WAAW,GAAG,UAAU,CAAC,MAAK;AAC5B,oBAAA,IAAI,SAAS;AAAE,wBAAA,SAAS,CAAC,WAAW,GAAG,MAAM,CAAC,QAAQ;gBACxD,CAAC,EAAE,IAAI,CAAC;YACV;AACA,YAAA,MAAM,CAAC,MAAM,IAAI;QACnB;AAAE,QAAA,MAAM;;YAEN,MAAM,EAAE,GAAG,QAAQ,CAAC,aAAa,CAAC,UAAU,CAAC;AAC7C,YAAA,EAAE,CAAC,KAAK,GAAG,MAAM,CAAC,SAAS;AAC3B,YAAA,EAAE,CAAC,KAAK,CAAC,QAAQ,GAAG,OAAO;AAC3B,YAAA,EAAE,CAAC,KAAK,CAAC,IAAI,GAAG,SAAS;AACzB,YAAA,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC;YAC7B,EAAE,CAAC,MAAM,EAAE;AACX,YAAA,QAAQ,CAAC,WAAW,CAAC,MAAM,CAAC;AAC5B,YAAA,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC;YAC7B,IAAI,SAAS,EAAE;AACb,gBAAA,SAAS,CAAC,WAAW,GAAG,MAAM,CAAC,MAAM;AACrC,gBAAA,IAAI,WAAW;oBAAE,YAAY,CAAC,WAAW,CAAC;AAC1C,gBAAA,WAAW,GAAG,UAAU,CAAC,MAAK;AAC5B,oBAAA,IAAI,SAAS;AAAE,wBAAA,SAAS,CAAC,WAAW,GAAG,MAAM,CAAC,QAAQ;gBACxD,CAAC,EAAE,IAAI,CAAC;YACV;AACA,YAAA,MAAM,CAAC,MAAM,IAAI;QACnB;AACF,IAAA,CAAC;AAED,IAAA,OAAO,EAAE,gBAAgB,CAAC,OAAO,EAAE,MAAM,CAAC;;IAG1C,MAAM,WAAW,GAAG,WAAW,CAAC,aAAa,CAAC,6BAA6B,CAAuB;IAClG,MAAM,SAAS,GAAG,WAAW,CAAC,aAAa,CAAC,8BAA8B,CAAuB;IACjG,MAAM,cAAc,GAAG,WAAW,CAAC,aAAa,CAAC,2BAA2B,CAAuB;AAEnG,IAAA,IAAI,MAAM,CAAC,SAAS,EAAE;AACpB,QAAA,iBAAiB,GAAG,WAAW,CAAC,MAAK;AACnC,YAAA,MAAM,GAAG,GAAG,IAAI,CAAC,GAAG,EAAE;AACtB,YAAA,MAAM,SAAS,GAAG,IAAI,IAAI,CAAC,MAAM,CAAC,SAAU,CAAC,CAAC,OAAO,EAAE;YACvD,MAAM,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,SAAS,GAAG,GAAG,IAAI,IAAI,CAAC,CAAC;YAE9D,IAAI,WAAW,EAAE;gBACf,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,EAAE,CAAC;AAClC,gBAAA,MAAM,IAAI,GAAG,IAAI,GAAG,EAAE;AACtB,gBAAA,WAAW,CAAC,WAAW,GAAG,GAAG,IAAI,CAAA,CAAA,EAAI,IAAI,CAAC,QAAQ,EAAE,CAAC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,EAAE;YACzE;AAEA,YAAA,IAAI,IAAI,KAAK,CAAC,IAAI,CAAC,OAAO,EAAE;gBAC1B,OAAO,GAAG,IAAI;gBACd,IAAI,iBAAiB,EAAE;oBACrB,aAAa,CAAC,iBAAiB,CAAC;oBAChC,iBAAiB,GAAG,IAAI;gBAC1B;AACA,gBAAA,IAAI,SAAS;AAAE,oBAAA,SAAS,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM;AAC/C,gBAAA,IAAI,cAAc;AAAE,oBAAA,cAAc,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM;AACzD,gBAAA,IAAI,OAAO;AAAE,oBAAA,OAAO,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM;AAC3C,gBAAA,MAAM,CAAC,SAAS,IAAI;YACtB;QACF,CAAC,EAAE,IAAI,CAAC;IACV;IAEA,OAAO;AACL,QAAA,eAAe,EAAE,MAAM;QACvB,OAAO,GAAA;AACL,YAAA,IAAI,iBAAiB;gBAAE,aAAa,CAAC,iBAAiB,CAAC;AACvD,YAAA,IAAI,WAAW;gBAAE,YAAY,CAAC,WAAW,CAAC;AAC1C,YAAA,WAAW,CAAC,SAAS,GAAG,EAAE;QAC5B,CAAC;KACF;AACH;AAEA;AACA;AACA;AAEA,SAAS,SAAS,CAAC,MAAc,EAAA;AAC/B,IAAA,IAAI,MAAM,KAAK,OAAO,EAAE;QACtB,OAAO;AACL,YAAA,WAAW,EAAE,eAAe;AAC5B,YAAA,QAAQ,EAAE,eAAe;AACzB,YAAA,MAAM,EAAE,cAAc;AACtB,YAAA,OAAO,EAAE,wBAAwB;AACjC,YAAA,SAAS,EAAE,YAAY;AACvB,YAAA,OAAO,EAAE,iBAAiB;SAC3B;IACH;AACA,IAAA,IAAI,MAAM,KAAK,IAAI,EAAE;QACnB,OAAO;AACL,YAAA,WAAW,EAAE,eAAe;AAC5B,YAAA,QAAQ,EAAE,mBAAmB;AAC7B,YAAA,MAAM,EAAE,iBAAiB;AACzB,YAAA,OAAO,EAAE,mBAAmB;AAC5B,YAAA,SAAS,EAAE,WAAW;AACtB,YAAA,OAAO,EAAE,kBAAkB;SAC5B;IACH;;IAEA,OAAO;AACL,QAAA,WAAW,EAAE,eAAe;AAC5B,QAAA,QAAQ,EAAE,mBAAmB;AAC7B,QAAA,MAAM,EAAE,iBAAiB;AACzB,QAAA,OAAO,EAAE,yBAAyB;AAClC,QAAA,SAAS,EAAE,WAAW;AACtB,QAAA,OAAO,EAAE,kBAAkB;KAC5B;AACH;AAEA,SAAS,SAAS,CAChB,MAAuB,EACvB,MAAoC,EACpC,MAAc,EAAA;IAEd,MAAM,eAAe,GAAG,IAAI,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE;AACrD,QAAA,KAAK,EAAE,UAAU;AACjB,QAAA,QAAQ,EAAE,KAAK;AAChB,KAAA,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC;AAExB,IAAA,MAAM,SAAS,GAAG,CAAC,CAAC,MAAM,CAAC,SAAS;IAEpC,OAAO;;;AAGoC,2CAAA,EAAA,MAAM,CAAC,WAAW,CAAA;6CAClB,eAAe,CAAA;;;;;;AAM1C,gBAAA,EAAA,MAAM,aAAa,MAAM,CAAA;;;AAGnB,sBAAA,EAAA,MAAM,cAAc,MAAM,CAAA;;;;;;;;AAQpC,YAAA,EAAA,MAAM,CAAC,OAAO,CAAA;;;;IAIxB,SAAS,GAAG;;;AAGwB,sCAAA,EAAA,MAAM,CAAC,OAAO,CAAA;AAChB,oCAAA,EAAA,MAAM,CAAC,SAAS,CAAA;;GAEnD,GAAG,EAAE;;;;;;AAM+B,qCAAA,EAAA,MAAM,CAAC,QAAQ,CAAA;;OAE/C;AACP;AAEA,eAAe,cAAc,CAAC,MAAuB,EAAE,IAAY,EAAA;;AAEjE,IAAA,MAAM,GAAG,GAAG,MAAM,CAAC,YAAY;IAC/B,IAAI,GAAG,EAAE;AACP,QAAA,IAAI,GAAG,CAAC,UAAU,CAAC,OAAO,CAAC;AAAE,YAAA,OAAO,GAAG;AACvC,QAAA,IAAI,GAAG,CAAC,UAAU,CAAC,QAAQ,CAAC;YAAE,OAAO,CAAA,0BAAA,EAA6B,GAAG,CAAA,CAAE;AACvE,QAAA,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,MAAM,CAAC;YAAE,OAAO,CAAA,sBAAA,EAAyB,GAAG,CAAA,CAAE;IACpE;;AAGA,IAAA,IAAI,MAAM,CAAC,SAAS,EAAE;AACpB,QAAA,IAAI;YACF,OAAO,MAAM,iBAAiB,CAAC,MAAM,CAAC,SAAS,EAAE,IAAI,CAAC;QACxD;AAAE,QAAA,MAAM;AACN,YAAA,OAAO,IAAI;QACb;IACF;AAEA,IAAA,OAAO,IAAI;AACb;AAEA;AACA;AACA;AACA;AACA;AAEA;;;AAGG;AACH,eAAe,iBAAiB,CAAC,IAAY,EAAE,IAAY,EAAA;;AAEzD,IAAA,MAAM,OAAO,GAAG,gBAAgB,CAAC,IAAI,CAAC;AACtC,IAAA,MAAM,WAAW,GAAG,OAAO,CAAC,MAAM;AAClC,IAAA,MAAM,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,IAAI,WAAW,GAAG,CAAC,CAAC,CAAC,CAAC;AACtD,IAAA,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,IAAI,GAAG,QAAQ,GAAG,WAAW,IAAI,CAAC,CAAC;IAE9D,MAAM,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC;AAC/C,IAAA,MAAM,CAAC,KAAK,GAAG,IAAI;AACnB,IAAA,MAAM,CAAC,MAAM,GAAG,IAAI;IACpB,MAAM,GAAG,GAAG,MAAM,CAAC,UAAU,CAAC,IAAI,CAAE;;AAGpC,IAAA,GAAG,CAAC,SAAS,GAAG,SAAS;IACzB,GAAG,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC;;AAG9B,IAAA,GAAG,CAAC,SAAS,GAAG,SAAS;AACzB,IAAA,KAAK,IAAI,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,WAAW,EAAE,GAAG,EAAE,EAAE;AAC1C,QAAA,KAAK,IAAI,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,WAAW,EAAE,GAAG,EAAE,EAAE;YAC1C,IAAI,OAAO,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,EAAE;AACrB,gBAAA,GAAG,CAAC,QAAQ,CAAC,MAAM,GAAG,GAAG,GAAG,QAAQ,EAAE,MAAM,GAAG,GAAG,GAAG,QAAQ,EAAE,QAAQ,EAAE,QAAQ,CAAC;YACpF;QACF;IACF;AAEA,IAAA,OAAO,MAAM,CAAC,SAAS,CAAC,WAAW,CAAC;AACtC;AAEA;AACA;AACA;AACA;AACA;AAEA,SAAS,gBAAgB,CAAC,IAAY,EAAA;IACpC,MAAM,KAAK,GAAG,IAAI,WAAW,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC;IAC5C,MAAM,OAAO,GAAG,aAAa,CAAC,KAAK,CAAC,MAAM,CAAC;AAC3C,IAAA,MAAM,IAAI,GAAG,OAAO,GAAG,CAAC,GAAG,EAAE;;IAG7B,MAAM,IAAI,GAAyB,KAAK,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,MAAM,KAAK,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC7F,MAAM,QAAQ,GAAgB,KAAK,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,MAAM,KAAK,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;;IAGzF,WAAW,CAAC,IAAI,EAAE,QAAQ,EAAE,CAAC,EAAE,CAAC,CAAC;IACjC,WAAW,CAAC,IAAI,EAAE,QAAQ,EAAE,IAAI,GAAG,CAAC,EAAE,CAAC,CAAC;IACxC,WAAW,CAAC,IAAI,EAAE,QAAQ,EAAE,CAAC,EAAE,IAAI,GAAG,CAAC,CAAC;;AAGxC,IAAA,MAAM,QAAQ,GAAG,qBAAqB,CAAC,OAAO,CAAC;AAC/C,IAAA,KAAK,MAAM,CAAC,IAAI,QAAQ,EAAE;AACxB,QAAA,KAAK,MAAM,CAAC,IAAI,QAAQ,EAAE;AACxB,YAAA,IAAI,QAAQ,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;gBAAE;YACtB,cAAc,CAAC,IAAI,EAAE,QAAQ,EAAE,CAAC,EAAE,CAAC,CAAC;QACtC;IACF;;AAGA,IAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;QACjC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;AACnB,YAAA,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC;YACxB,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI;QACvB;QACA,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;AACnB,YAAA,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC;YACxB,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI;QACvB;IACF;;IAGA,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI;IACxB,QAAQ,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI;;AAG5B,IAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;QAC1B,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI;AACrB,QAAA,QAAQ,CAAC,CAAC,CAAC,CAAC,IAAI,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI;QAChC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI;AACrB,QAAA,QAAQ,CAAC,IAAI,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI;IAClC;IACA,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI;;AAGrB,IAAA,IAAI,OAAO,IAAI,CAAC,EAAE;AAChB,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;AAC1B,YAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;AAC1B,gBAAA,QAAQ,CAAC,CAAC,CAAC,CAAC,IAAI,GAAG,EAAE,GAAG,CAAC,CAAC,GAAG,IAAI;AACjC,gBAAA,QAAQ,CAAC,IAAI,GAAG,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI;YACnC;QACF;IACF;;AAGA,IAAA,MAAM,OAAO,GAAG,CAAC,CAAC;IAClB,MAAM,SAAS,GAAG,UAAU,CAAC,KAAK,EAAE,OAAgB,CAAC;;IAGrD,SAAS,CAAC,IAAI,EAAE,QAAQ,EAAE,SAAS,EAAE,IAAI,CAAC;;IAG1C,MAAM,QAAQ,GAAG,cAAc,CAAC,IAAI,EAAE,QAAQ,EAAE,IAAI,CAAC;IACrD,SAAS,CAAC,IAAI,EAAE,QAAQ,EAAE,QAAQ,EAAE,IAAI,CAAC;;IAGzC,eAAe,CAAC,IAAI,EAAE,OAAO,EAAE,QAAQ,EAAE,IAAI,CAAC;;AAG9C,IAAA,IAAI,OAAO,IAAI,CAAC,EAAE;AAChB,QAAA,gBAAgB,CAAC,IAAI,EAAE,OAAO,EAAE,IAAI,CAAC;IACvC;;IAGA,OAAO,IAAI,CAAC,GAAG,CAAC,GAAG,IAAI,GAAG,CAAC,GAAG,CAAC,IAAI,IAAI,IAAI,KAAK,IAAI,CAAC,CAAC;AACxD;AAEA,SAAS,aAAa,CAAC,OAAe,EAAA;;AAEpC,IAAA,MAAM,UAAU,GAAG;AACjB,QAAA,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG;AAC9C,QAAA,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG;AAChD,QAAA,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI;AACrD,QAAA,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI;KAC3D;AACD,IAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,EAAE,EAAE;AAC5B,QAAA,IAAI,UAAU,CAAC,CAAC,CAAC,IAAI,OAAO;AAAE,YAAA,OAAO,CAAC;IACxC;AACA,IAAA,MAAM,IAAI,KAAK,CAAC,sCAAsC,CAAC;AACzD;AAEA,SAAS,qBAAqB,CAAC,OAAe,EAAA;IAC5C,IAAI,OAAO,IAAI,CAAC;AAAE,QAAA,OAAO,EAAE;AAC3B,IAAA,MAAM,SAAS,GAAe;AAC5B,QAAA,EAAE,EAAE,EAAE;QACN,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC;AAC3C,QAAA,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,CAAC;AAC/D,QAAA,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC;AAC1D,QAAA,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC;AAClE,QAAA,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC;AACzD,QAAA,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC;AAChE,QAAA,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC;QACpE,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,CAAC;QACpD,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,CAAC;QACpD,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,CAAC;AACpD,QAAA,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;AAC9D,QAAA,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;AAC9D,QAAA,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;KAC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"}