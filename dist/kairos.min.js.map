{"version":3,"file":"kairos.min.js","sources":["../src/adapters/MercadoPagoAdapter.ts","../src/adapters/PagSeguroAdapter.ts","../src/core/KairosPayments.ts","../src/components/CardPaymentForm.tsx","../src/index.ts"],"sourcesContent":["import type {\n  PspAdapter,\n  CardPaymentConfig,\n  CardPaymentInstance,\n  InstallmentOption,\n  PaymentData\n} from '../types';\n\ndeclare global {\n  interface Window {\n    MercadoPago: any;\n  }\n}\n\n/**\n * MercadoPago Adapter\n *\n * Uses MercadoPago Bricks for card payment UI.\n * @see https://www.mercadopago.com.br/developers/pt/docs/checkout-bricks\n */\nexport class MercadoPagoAdapter implements PspAdapter {\n  readonly provider = 'MERCADOPAGO';\n\n  private mp: any = null;\n  private bricksBuilder: any = null;\n  private cardPaymentBrick: any = null;\n  private publicKey: string = '';\n\n  /**\n   * Load MercadoPago SDK script dynamically.\n   */\n  private async loadScript(): Promise<void> {\n    if (window.MercadoPago) {\n      return;\n    }\n\n    return new Promise((resolve, reject) => {\n      const script = document.createElement('script');\n      script.src = 'https://sdk.mercadopago.com/js/v2';\n      script.async = true;\n      script.onload = () => resolve();\n      script.onerror = () => reject(new Error('Failed to load MercadoPago SDK'));\n      document.head.appendChild(script);\n    });\n  }\n\n  async init(publicKey: string, options?: Record<string, unknown>): Promise<void> {\n    this.publicKey = publicKey;\n\n    await this.loadScript();\n\n    this.mp = new window.MercadoPago(publicKey, {\n      locale: options?.locale || 'pt-BR'\n    });\n\n    this.bricksBuilder = this.mp.bricks();\n  }\n\n  async createCardPayment(\n    container: string | HTMLElement,\n    config: CardPaymentConfig\n  ): Promise<CardPaymentInstance> {\n    const containerId = typeof container === 'string'\n      ? container.replace('#', '')\n      : container.id;\n\n    // Clear any existing brick\n    if (this.cardPaymentBrick) {\n      await this.cardPaymentBrick.unmount();\n    }\n\n    const settings = {\n      initialization: {\n        amount: config.amount,\n        payer: {\n          email: ''\n        }\n      },\n      customization: {\n        visual: {\n          style: {\n            customVariables: {\n              formBackgroundColor: config.styles?.primaryColor || '#ffffff',\n              baseColor: config.styles?.primaryColor || '#1a1a1a'\n            }\n          }\n        },\n        paymentMethods: {\n          maxInstallments: config.maxInstallments || 12\n        }\n      },\n      callbacks: {\n        onReady: () => {\n          config.onReady?.();\n        },\n        onSubmit: async (cardFormData: any) => {\n          const paymentData: PaymentData = {\n            token: cardFormData.token,\n            installments: cardFormData.installments,\n            paymentMethodId: cardFormData.payment_method_id,\n            issuerId: cardFormData.issuer_id,\n            lastFourDigits: cardFormData.last_four_digits || '',\n            cardholderName: cardFormData.cardholder?.name || '',\n            provider: this.provider\n          };\n\n          await config.onSubmit(paymentData);\n        },\n        onError: (error: any) => {\n          config.onError?.({\n            code: error.type || 'UNKNOWN',\n            message: error.message || 'An error occurred',\n            cause: error\n          });\n        }\n      }\n    };\n\n    this.cardPaymentBrick = await this.bricksBuilder.create(\n      'cardPayment',\n      containerId,\n      settings\n    );\n\n    return {\n      updateAmount: (amount: number) => {\n        // MercadoPago Bricks doesn't support dynamic amount update\n        // Would need to recreate the brick\n        console.warn('MercadoPago Bricks does not support dynamic amount update');\n      },\n      submit: async () => {\n        // Bricks handles submission internally\n        throw new Error('Use form submission instead');\n      },\n      unmount: () => {\n        this.cardPaymentBrick?.unmount();\n        this.cardPaymentBrick = null;\n      }\n    };\n  }\n\n  async getInstallments(amount: number, bin: string): Promise<InstallmentOption[]> {\n    const response = await this.mp.getInstallments({\n      amount: String(amount),\n      bin: bin\n    });\n\n    if (!response || response.length === 0) {\n      return [];\n    }\n\n    const payerCosts = response[0].payer_costs || [];\n\n    return payerCosts.map((cost: any, index: number) => ({\n      installments: cost.installments,\n      installmentAmount: cost.installment_amount,\n      totalAmount: cost.total_amount,\n      interestFree: cost.installment_rate === 0,\n      interestRate: cost.installment_rate,\n      recommended: index === 0\n    }));\n  }\n\n  destroy(): void {\n    if (this.cardPaymentBrick) {\n      this.cardPaymentBrick.unmount();\n      this.cardPaymentBrick = null;\n    }\n    this.mp = null;\n    this.bricksBuilder = null;\n  }\n}\n","import type {\n  PspAdapter,\n  CardPaymentConfig,\n  CardPaymentInstance,\n  InstallmentOption,\n  PaymentData\n} from '../types';\n\ndeclare global {\n  interface Window {\n    PagSeguro: any;\n  }\n}\n\n/**\n * PagSeguro (PagBank) Adapter\n *\n * @see https://dev.pagbank.uol.com.br/docs\n */\nexport class PagSeguroAdapter implements PspAdapter {\n  readonly provider = 'PAGSEGURO';\n\n  private publicKey: string = '';\n  private environment: string = 'sandbox';\n\n  /**\n   * Load PagSeguro SDK script dynamically.\n   */\n  private async loadScript(): Promise<void> {\n    if (window.PagSeguro) {\n      return;\n    }\n\n    const scriptUrl = this.environment === 'production'\n      ? 'https://assets.pagseguro.com.br/checkout-sdk-js/rc/dist/browser/pagseguro.min.js'\n      : 'https://stc.sandbox.pagseguro.uol.com.br/pagseguro/api/v2/checkout/pagseguro.directpayment.js';\n\n    return new Promise((resolve, reject) => {\n      const script = document.createElement('script');\n      script.src = scriptUrl;\n      script.async = true;\n      script.onload = () => resolve();\n      script.onerror = () => reject(new Error('Failed to load PagSeguro SDK'));\n      document.head.appendChild(script);\n    });\n  }\n\n  async init(publicKey: string, options?: Record<string, unknown>): Promise<void> {\n    this.publicKey = publicKey;\n    this.environment = (options?.environment as string) || 'sandbox';\n\n    await this.loadScript();\n\n    // PagSeguro requires session initialization\n    // This would typically be done via your backend\n  }\n\n  async createCardPayment(\n    container: string | HTMLElement,\n    config: CardPaymentConfig\n  ): Promise<CardPaymentInstance> {\n    const containerEl = typeof container === 'string'\n      ? document.querySelector(container)\n      : container;\n\n    if (!containerEl) {\n      throw new Error(`Container not found: ${container}`);\n    }\n\n    // PagSeguro doesn't have a pre-built form like MercadoPago Bricks\n    // We need to create our own form and use their tokenization API\n    const formHtml = this.createFormHtml(config);\n    containerEl.innerHTML = formHtml;\n\n    const form = containerEl.querySelector('form') as HTMLFormElement;\n\n    form.addEventListener('submit', async (e) => {\n      e.preventDefault();\n\n      try {\n        const formData = new FormData(form);\n        const token = await this.tokenizeCard(formData);\n\n        const paymentData: PaymentData = {\n          token,\n          installments: parseInt(formData.get('installments') as string) || 1,\n          paymentMethodId: 'credit_card',\n          issuerId: '',\n          lastFourDigits: (formData.get('cardNumber') as string)?.slice(-4) || '',\n          cardholderName: formData.get('cardholderName') as string || '',\n          provider: this.provider\n        };\n\n        await config.onSubmit(paymentData);\n      } catch (error: any) {\n        config.onError?.({\n          code: 'TOKENIZATION_ERROR',\n          message: error.message || 'Failed to tokenize card',\n          cause: error\n        });\n      }\n    });\n\n    config.onReady?.();\n\n    return {\n      updateAmount: (amount: number) => {\n        const amountEl = form.querySelector('[data-amount]');\n        if (amountEl) {\n          amountEl.textContent = `R$ ${amount.toFixed(2)}`;\n        }\n      },\n      submit: async () => {\n        form.dispatchEvent(new Event('submit'));\n        return {} as PaymentData; // Will be handled by onSubmit\n      },\n      unmount: () => {\n        containerEl.innerHTML = '';\n      }\n    };\n  }\n\n  private createFormHtml(config: CardPaymentConfig): string {\n    return `\n      <form class=\"kairos-card-form\" data-kairos-form>\n        <div class=\"kairos-field\">\n          <label for=\"cardNumber\">Numero do Cartao</label>\n          <input type=\"text\" id=\"cardNumber\" name=\"cardNumber\"\n                 placeholder=\"0000 0000 0000 0000\"\n                 maxlength=\"19\" required />\n        </div>\n\n        <div class=\"kairos-field-row\">\n          <div class=\"kairos-field\">\n            <label for=\"expiry\">Validade</label>\n            <input type=\"text\" id=\"expiry\" name=\"expiry\"\n                   placeholder=\"MM/AA\" maxlength=\"5\" required />\n          </div>\n          <div class=\"kairos-field\">\n            <label for=\"cvv\">CVV</label>\n            <input type=\"text\" id=\"cvv\" name=\"cvv\"\n                   placeholder=\"123\" maxlength=\"4\" required />\n          </div>\n        </div>\n\n        <div class=\"kairos-field\">\n          <label for=\"cardholderName\">Nome no Cartao</label>\n          <input type=\"text\" id=\"cardholderName\" name=\"cardholderName\"\n                 placeholder=\"NOME COMO NO CARTAO\" required />\n        </div>\n\n        ${config.showInstallments !== false ? `\n        <div class=\"kairos-field\">\n          <label for=\"installments\">Parcelas</label>\n          <select id=\"installments\" name=\"installments\">\n            <option value=\"1\">1x de R$ ${config.amount.toFixed(2)}</option>\n          </select>\n        </div>\n        ` : ''}\n\n        <button type=\"submit\" class=\"kairos-submit-btn\">\n          Pagar <span data-amount>R$ ${config.amount.toFixed(2)}</span>\n        </button>\n      </form>\n    `;\n  }\n\n  private async tokenizeCard(formData: FormData): Promise<string> {\n    // PagSeguro card tokenization\n    // In a real implementation, this would call PagSeguro's API\n    const cardNumber = (formData.get('cardNumber') as string)?.replace(/\\s/g, '');\n    const [expMonth, expYear] = (formData.get('expiry') as string)?.split('/') || [];\n    const cvv = formData.get('cvv') as string;\n    const cardholderName = formData.get('cardholderName') as string;\n\n    // Call PagSeguro tokenization API\n    const response = await fetch('https://api.pagseguro.com/public-keys/card', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': this.publicKey\n      },\n      body: JSON.stringify({\n        card: {\n          number: cardNumber,\n          exp_month: expMonth,\n          exp_year: `20${expYear}`,\n          security_code: cvv,\n          holder: {\n            name: cardholderName\n          }\n        }\n      })\n    });\n\n    if (!response.ok) {\n      throw new Error('Failed to tokenize card with PagSeguro');\n    }\n\n    const data = await response.json();\n    return data.encrypted;\n  }\n\n  async getInstallments(amount: number, bin: string): Promise<InstallmentOption[]> {\n    // PagSeguro installment calculation\n    // This would typically be done via your backend\n    const maxInstallments = 12;\n    const options: InstallmentOption[] = [];\n\n    for (let i = 1; i <= maxInstallments; i++) {\n      const interestFree = i <= 3;\n      const rate = interestFree ? 0 : 0.0199; // 1.99% per month\n      const totalAmount = interestFree ? amount : amount * Math.pow(1 + rate, i);\n      const installmentAmount = totalAmount / i;\n\n      if (installmentAmount >= 5) { // Minimum R$ 5 per installment\n        options.push({\n          installments: i,\n          installmentAmount: Math.round(installmentAmount * 100) / 100,\n          totalAmount: Math.round(totalAmount * 100) / 100,\n          interestFree,\n          interestRate: interestFree ? 0 : rate * 100,\n          recommended: i === 1\n        });\n      }\n    }\n\n    return options;\n  }\n\n  destroy(): void {\n    // Cleanup if needed\n  }\n}\n","import type {\n  KairosConfig,\n  CardPaymentConfig,\n  TokenizationOptions,\n  TokenizationOption,\n  InstallmentOption,\n  PspAdapter,\n  CardPaymentInstance\n} from '../types';\nimport { MercadoPagoAdapter } from '../adapters/MercadoPagoAdapter';\nimport { PagSeguroAdapter } from '../adapters/PagSeguroAdapter';\n\n/**\n * Main entry point for Kairos Payments SDK.\n *\n * @example\n * ```typescript\n * const kairos = await KairosPayments.init({\n *   tenantId: 'faithlink',\n *   environment: 'production'\n * });\n *\n * await kairos.createCardPayment('#card-form', {\n *   amount: 100.00,\n *   onSubmit: (data) => console.log(data.token)\n * });\n * ```\n */\nexport class KairosPayments {\n  private config: Required<KairosConfig>;\n  private options: TokenizationOption[] = [];\n  private adapter: PspAdapter | null = null;\n  private cardInstance: CardPaymentInstance | null = null;\n\n  private constructor(config: KairosConfig) {\n    this.config = {\n      tenantId: config.tenantId,\n      environment: config.environment || 'production',\n      apiUrl: config.apiUrl || 'https://api.kairoshub.tech',\n      preferredProvider: config.preferredProvider || undefined as any,\n      locale: config.locale || 'pt-BR',\n      debug: config.debug || false\n    };\n  }\n\n  /**\n   * Initialize the Kairos Payments SDK.\n   * Fetches available PSPs and their public keys from the Kairos API.\n   */\n  static async init(config: KairosConfig): Promise<KairosPayments> {\n    const instance = new KairosPayments(config);\n    await instance.fetchOptions();\n    return instance;\n  }\n\n  /**\n   * Fetch tokenization options from Kairos API.\n   */\n  private async fetchOptions(): Promise<void> {\n    const url = `${this.config.apiUrl}/api/v1/tokenization/${this.config.tenantId}/options`;\n\n    this.log('Fetching tokenization options from', url);\n\n    const response = await fetch(url);\n\n    if (!response.ok) {\n      const error = await response.json().catch(() => ({}));\n      throw new Error(\n        error.message || `Failed to fetch tokenization options: ${response.status}`\n      );\n    }\n\n    const data: TokenizationOptions = await response.json();\n    this.options = data.options;\n\n    this.log('Available PSPs:', this.options.map(o => o.provider));\n  }\n\n  /**\n   * Get the best available PSP adapter.\n   */\n  private async getAdapter(): Promise<PspAdapter> {\n    if (this.adapter) {\n      return this.adapter;\n    }\n\n    // Find preferred or first available PSP\n    let option = this.options[0];\n\n    if (this.config.preferredProvider) {\n      const preferred = this.options.find(\n        o => o.provider === this.config.preferredProvider\n      );\n      if (preferred) {\n        option = preferred;\n      }\n    }\n\n    if (!option) {\n      throw new Error('No PSP available for card payments. Contact your administrator.');\n    }\n\n    this.log('Using PSP:', option.provider);\n\n    // Create adapter based on provider\n    switch (option.provider) {\n      case 'MERCADOPAGO':\n        this.adapter = new MercadoPagoAdapter();\n        break;\n      case 'PAGSEGURO':\n        this.adapter = new PagSeguroAdapter();\n        break;\n      default:\n        throw new Error(`Unsupported PSP provider: ${option.provider}`);\n    }\n\n    // Initialize adapter with public key\n    await this.adapter.init(option.publicKey, {\n      locale: this.config.locale,\n      environment: option.environment\n    });\n\n    return this.adapter;\n  }\n\n  /**\n   * Create a card payment form.\n   *\n   * @param container - CSS selector or HTMLElement where the form will be mounted\n   * @param config - Payment configuration\n   * @returns Promise resolving to a CardPaymentInstance\n   */\n  async createCardPayment(\n    container: string | HTMLElement,\n    config: CardPaymentConfig\n  ): Promise<CardPaymentInstance> {\n    const adapter = await this.getAdapter();\n\n    this.log('Creating card payment form with amount:', config.amount);\n\n    this.cardInstance = await adapter.createCardPayment(container, config);\n    return this.cardInstance;\n  }\n\n  /**\n   * Get installment options for a given amount.\n   *\n   * @param amount - Payment amount in BRL\n   * @param bin - First 6 digits of the card number\n   * @returns Promise resolving to installment options\n   */\n  async getInstallments(amount: number, bin: string): Promise<InstallmentOption[]> {\n    const adapter = await this.getAdapter();\n    return adapter.getInstallments(amount, bin);\n  }\n\n  /**\n   * Get available PSP options for this tenant.\n   */\n  getAvailableProviders(): TokenizationOption[] {\n    return [...this.options];\n  }\n\n  /**\n   * Get current configuration.\n   */\n  getConfig(): Readonly<KairosConfig> {\n    return { ...this.config };\n  }\n\n  /**\n   * Destroy the SDK instance and cleanup resources.\n   */\n  destroy(): void {\n    if (this.cardInstance) {\n      this.cardInstance.unmount();\n      this.cardInstance = null;\n    }\n    if (this.adapter) {\n      this.adapter.destroy();\n      this.adapter = null;\n    }\n    this.options = [];\n  }\n\n  private log(...args: unknown[]): void {\n    if (this.config.debug) {\n      console.log('[Kairos]', ...args);\n    }\n  }\n}\n","/**\n * React component for card payment form.\n *\n * @example\n * ```tsx\n * import { CardPaymentForm } from '@kairos/payments-js';\n *\n * function Checkout() {\n *   return (\n *     <CardPaymentForm\n *       tenantId=\"faithlink\"\n *       amount={100.00}\n *       onSuccess={(data) => console.log('Token:', data.token)}\n *       onError={(error) => console.error(error)}\n *     />\n *   );\n * }\n * ```\n */\n\nimport { useEffect, useRef, useState } from 'react';\nimport { KairosPayments } from '../core/KairosPayments';\nimport type { CardPaymentConfig, PaymentData, PaymentError, KairosConfig } from '../types';\n\nexport interface CardPaymentFormProps {\n  /** Tenant identifier */\n  tenantId: string;\n\n  /** Payment amount in BRL */\n  amount: number;\n\n  /** Environment */\n  environment?: 'sandbox' | 'production';\n\n  /** API URL (optional) */\n  apiUrl?: string;\n\n  /** Preferred PSP provider */\n  preferredProvider?: 'MERCADOPAGO' | 'PAGSEGURO';\n\n  /** Maximum installments */\n  maxInstallments?: number;\n\n  /** Callback on successful payment */\n  onSuccess: (data: PaymentData) => void;\n\n  /** Callback on error */\n  onError?: (error: PaymentError) => void;\n\n  /** Callback when form is ready */\n  onReady?: () => void;\n\n  /** Custom class name */\n  className?: string;\n\n  /** Debug mode */\n  debug?: boolean;\n}\n\nexport function CardPaymentForm({\n  tenantId,\n  amount,\n  environment = 'production',\n  apiUrl,\n  preferredProvider,\n  maxInstallments = 12,\n  onSuccess,\n  onError,\n  onReady,\n  className,\n  debug = false\n}: CardPaymentFormProps) {\n  const containerRef = useRef<HTMLDivElement>(null);\n  const kairosRef = useRef<KairosPayments | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    let mounted = true;\n\n    async function initKairos() {\n      if (!containerRef.current) return;\n\n      try {\n        setLoading(true);\n        setError(null);\n\n        const config: KairosConfig = {\n          tenantId,\n          environment,\n          apiUrl,\n          preferredProvider,\n          debug\n        };\n\n        const kairos = await KairosPayments.init(config);\n\n        if (!mounted) {\n          kairos.destroy();\n          return;\n        }\n\n        kairosRef.current = kairos;\n\n        const paymentConfig: CardPaymentConfig = {\n          amount,\n          maxInstallments,\n          onReady: () => {\n            setLoading(false);\n            onReady?.();\n          },\n          onSubmit: async (data) => {\n            onSuccess(data);\n          },\n          onError: (err) => {\n            setError(err.message);\n            onError?.(err);\n          }\n        };\n\n        await kairos.createCardPayment(containerRef.current, paymentConfig);\n      } catch (err: any) {\n        if (mounted) {\n          const errorMessage = err.message || 'Failed to initialize payment form';\n          setError(errorMessage);\n          setLoading(false);\n          onError?.({\n            code: 'INIT_ERROR',\n            message: errorMessage,\n            cause: err\n          });\n        }\n      }\n    }\n\n    initKairos();\n\n    return () => {\n      mounted = false;\n      if (kairosRef.current) {\n        kairosRef.current.destroy();\n        kairosRef.current = null;\n      }\n    };\n  }, [tenantId, amount, environment, apiUrl, preferredProvider]);\n\n  return (\n    <div className={className}>\n      {loading && (\n        <div className=\"kairos-loading\">\n          <div className=\"kairos-spinner\" />\n          <span>Carregando formulario de pagamento...</span>\n        </div>\n      )}\n\n      {error && (\n        <div className=\"kairos-error\">\n          <span>{error}</span>\n        </div>\n      )}\n\n      <div\n        ref={containerRef}\n        id=\"kairos-card-payment-container\"\n        style={{ display: loading ? 'none' : 'block' }}\n      />\n\n      {!loading && !error && (\n        <div className=\"kairos-branding\" style={brandingStyles}>\n          <KairosLogo />\n          <span style={brandingTextStyle}>Powered by Kairos</span>\n        </div>\n      )}\n    </div>\n  );\n}\n\nconst brandingStyles: React.CSSProperties = {\n  display: 'flex',\n  alignItems: 'center',\n  justifyContent: 'center',\n  gap: '6px',\n  padding: '8px 0 4px',\n  opacity: 0.6,\n};\n\nconst brandingTextStyle: React.CSSProperties = {\n  fontSize: '11px',\n  fontFamily: '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, sans-serif',\n  color: '#6b7280',\n  letterSpacing: '0.02em',\n};\n\nfunction KairosLogo() {\n  return (\n    <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path\n        d=\"M12 2L2 7v10l10 5 10-5V7L12 2z\"\n        stroke=\"#6b7280\"\n        strokeWidth=\"1.5\"\n        strokeLinejoin=\"round\"\n      />\n      <path\n        d=\"M12 7v10M8 9l4 3 4-3M8 15l4-3 4 3\"\n        stroke=\"#6b7280\"\n        strokeWidth=\"1.5\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      />\n    </svg>\n  );\n}\n","/**\n * Kairos Payments JavaScript SDK\n *\n * A unified SDK for card tokenization and payments across multiple PSPs.\n *\n * @example\n * ```typescript\n * import { KairosPayments } from '@kairos/payments-js';\n *\n * const kairos = await KairosPayments.init({\n *   tenantId: 'faithlink',\n *   environment: 'production'\n * });\n *\n * await kairos.createCardPayment('#container', {\n *   amount: 100.00,\n *   onSubmit: async (data) => {\n *     // Send data.token to your backend\n *   }\n * });\n * ```\n */\n\nexport { KairosPayments } from './core/KairosPayments';\nexport { CardPaymentForm } from './components/CardPaymentForm';\n\n// Types\nexport type {\n  KairosConfig,\n  CardPaymentConfig,\n  PaymentData,\n  InstallmentOption,\n  TokenizationOptions,\n  PspAdapter\n} from './types';\n\n// Version\nexport const VERSION = '0.1.0';\n"],"names":["MercadoPagoAdapter","constructor","this","provider","mp","bricksBuilder","cardPaymentBrick","publicKey","loadScript","window","MercadoPago","Promise","resolve","reject","script","document","createElement","src","async","onload","onerror","Error","head","appendChild","init","options","locale","bricks","createCardPayment","container","config","containerId","replace","id","unmount","settings","initialization","amount","payer","email","customization","visual","style","customVariables","formBackgroundColor","styles","primaryColor","baseColor","paymentMethods","maxInstallments","callbacks","onReady","onSubmit","cardFormData","paymentData","token","installments","paymentMethodId","payment_method_id","issuerId","issuer_id","lastFourDigits","last_four_digits","cardholderName","cardholder","name","onError","error","code","type","message","cause","create","updateAmount","console","warn","submit","getInstallments","bin","response","String","length","payer_costs","map","cost","index","installmentAmount","installment_amount","totalAmount","total_amount","interestFree","installment_rate","interestRate","recommended","destroy","PagSeguroAdapter","environment","PagSeguro","scriptUrl","containerEl","querySelector","formHtml","createFormHtml","innerHTML","form","addEventListener","e","preventDefault","formData","FormData","tokenizeCard","parseInt","get","slice","amountEl","textContent","toFixed","dispatchEvent","Event","showInstallments","cardNumber","expMonth","expYear","split","cvv","fetch","method","headers","Authorization","body","JSON","stringify","card","number","exp_month","exp_year","security_code","holder","ok","json","encrypted","i","rate","Math","pow","push","round","KairosPayments","adapter","cardInstance","tenantId","apiUrl","preferredProvider","undefined","debug","instance","fetchOptions","url","log","catch","status","data","o","getAdapter","option","preferred","find","getAvailableProviders","getConfig","args","brandingStyles","display","alignItems","justifyContent","gap","padding","opacity","brandingTextStyle","fontSize","fontFamily","color","letterSpacing","KairosLogo","_jsxs","width","height","viewBox","fill","xmlns","children","_jsx","d","stroke","strokeWidth","strokeLinejoin","strokeLinecap","onSuccess","className","containerRef","useRef","kairosRef","loading","setLoading","useState","setError","useEffect","mounted","current","kairos","paymentConfig","err","errorMessage","initKairos","ref"],"mappings":"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"}